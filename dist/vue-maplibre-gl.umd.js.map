{"version":3,"file":"vue-maplibre-gl.umd.js","sources":["../src/lib/types.ts","../src/lib/defaults.ts","../src/lib/lib/map.lib.ts","../src/lib/components/controls/position.enum.ts","../src/lib/lib/mapRegistry.ts","../src/lib/lib/debounce.ts","../node_modules/modular-maptiler-sdk/src/language.ts","../src/lib/components/map.component.ts","../src/lib/composable/usePositionWatcher.ts","../src/lib/components/controls/attribution.control.ts","../src/lib/components/controls/custom.control.ts","../src/lib/components/controls/fullscreen.control.ts","../src/lib/components/controls/frameRate.control.ts","../src/lib/components/controls/geolocation.control.ts","../src/lib/components/controls/navigation.control.ts","../src/lib/components/controls/scale.control.ts","../src/lib/components/button.component.ts","../src/lib/components/controls/styleSwitch.control.ts","../src/lib/components/marker.component.ts","../src/lib/components/popup.component.ts","../src/lib/lib/sourceLayer.registry.ts","../src/lib/lib/source.lib.ts","../src/lib/composable/useSource.ts","../src/lib/components/sources/canvas.source.ts","../src/lib/components/sources/geojson.source.ts","../src/lib/components/sources/image.source.ts","../src/lib/components/sources/raster.source.ts","../src/lib/components/sources/rasterDem.source.ts","../src/lib/components/sources/vector.source.ts","../src/lib/components/sources/video.source.ts","../src/lib/lib/layer.lib.ts","../src/lib/composable/useDisposableLayer.ts","../src/lib/components/layers/background.layer.ts","../src/lib/components/layers/circle.layer.ts","../src/lib/components/layers/fill.layer.ts","../src/lib/components/layers/fillExtrusion.layer.ts","../src/lib/components/layers/heatmap.layer.ts","../src/lib/components/layers/hillshade.layer.ts","../src/lib/components/layers/line.layer.ts","../src/lib/components/layers/raster.layer.ts","../src/lib/components/layers/smybol.layer.ts","../src/lib/main.ts"],"sourcesContent":["import { InjectionKey, Ref, ShallowRef } from 'vue';\nimport { Map, Marker, SourceSpecification, StyleSpecification } from 'maplibre-gl';\nimport { MglMap } from '@/lib/components';\nimport { Emitter } from 'mitt';\nimport { SourceLayerRegistry } from '@/lib/lib/sourceLayer.registry';\n\nexport const mapSymbol          = Symbol('map') as InjectionKey<ShallowRef<Map | undefined>>,\n            isLoadedSymbol      = Symbol('isLoaded') as InjectionKey<Ref<boolean>>,\n            isInitializedSymbol = Symbol('isInitialized') as InjectionKey<Ref<boolean>>,\n            componentIdSymbol   = Symbol('componentId') as InjectionKey<number>,\n            sourceIdSymbol      = Symbol('sourceId') as InjectionKey<string>,\n            sourceLayerRegistry = Symbol('sourceLayerRegistry') as InjectionKey<SourceLayerRegistry>,\n            emitterSymbol       = Symbol('emitter') as InjectionKey<Emitter<MglEvents>>,\n            markerSymbol        = Symbol('marker') as InjectionKey<ShallowRef<Marker | undefined>>;\n\nexport interface MglEvent<T = any> {\n\ttype: string;\n\tcomponent: InstanceType<typeof MglMap>;\n\tmap: Map;\n\tevent: T;\n}\n\nexport type MglEvents = {\n\tstyleSwitched: StyleSwitchItem;\n}\n\nexport interface StyleSwitchItem {\n\tname: string;\n\tlabel: string;\n\ticon?: {\n\t\tpath: string;\n\t};\n\tstyle: StyleSpecification | string;\n}\n\nexport type AllProps<T extends object> = { [K in keyof T]: undefined };\n\n// only proper way to ensure all possible option to track option changes by type system\nexport function AllOptions<T extends object>(obj: AllProps<Required<T>>) {\n\treturn Object.keys(obj) as Array<keyof T>;\n}\n\nexport function AllSourceOptions<T = SourceSpecification>(obj: AllProps<Required<Omit<T, 'type'>>>) {\n\treturn Object.keys(obj) as Array<keyof T>;\n}\n\nexport type ValidLanguages =\n\t'sq'\n\t| 'am'\n\t| 'ar'\n\t| 'hy'\n\t| 'az'\n\t| 'eu'\n\t| 'be'\n\t| 'bs'\n\t| 'br'\n\t| 'bg'\n\t| 'ca'\n\t| 'zh'\n\t| 'co'\n\t| 'hr'\n\t| 'cs'\n\t| 'da'\n\t| 'nl'\n\t| 'en'\n\t| 'eo'\n\t| 'et'\n\t| 'fi'\n\t| 'fr'\n\t| 'fy'\n\t| 'ka'\n\t| 'de'\n\t| 'el'\n\t| 'he'\n\t| 'hi'\n\t| 'hu'\n\t| 'is'\n\t| 'id'\n\t| 'ga'\n\t| 'it'\n\t| 'ja'\n\t| 'ja-Hira'\n\t| 'ja_kana'\n\t| 'ja_rm'\n\t| 'ja-Latn'\n\t| 'kn'\n\t| 'kk'\n\t| 'ko'\n\t| 'ko-Latn'\n\t| 'ku'\n\t| 'la'\n\t| 'lv'\n\t| 'lt'\n\t| 'lb'\n\t| 'mk'\n\t| 'ml'\n\t| 'mt'\n\t| 'no'\n\t| 'oc'\n\t| 'pl'\n\t| 'pt'\n\t| 'ro'\n\t| 'rm'\n\t| 'ru'\n\t| 'gd'\n\t| 'sr'\n\t| 'sr-Latn'\n\t| 'sk'\n\t| 'sl'\n\t| 'es'\n\t| 'sv'\n\t| 'ta'\n\t| 'te'\n\t| 'th'\n\t| 'tr'\n\t| 'uk'\n\t| 'cy'\n","import { LngLatLike, MapOptions as MaplibreMapOptions } from 'maplibre-gl';\nimport { reactive } from 'vue';\nimport { ValidLanguages } from '@/lib/types';\n\nexport type MapOptions = Omit<MaplibreMapOptions, 'container' | 'style'> & { style: object | string, language?: ValidLanguages };\n\nexport const defaults = reactive<MapOptions>({\n\tstyle      : 'https://demotiles.maplibre.org/style.json',\n\tcenter     : Object.freeze([ 0, 0 ]) as LngLatLike,\n\tzoom       : 1,\n\ttrackResize: false\n});\n","import { Map, MapOptions, MarkerOptions, PopupOptions } from 'maplibre-gl';\nimport { MglMap } from '@/lib/components';\nimport { MglEvent } from '@/lib/types';\n\nexport type MapEventHandler = (e: any) => void;\n\nexport class MapLib {\n\n\tstatic readonly MAP_OPTION_KEYS: Array<keyof MapOptions | 'mapStyle'> = [\n\t\t'antialias', 'attributionControl', 'bearing', 'bearingSnap', 'bounds', 'boxZoom', 'center', 'clickTolerance', 'collectResourceTiming',\n\t\t'crossSourceCollisions', 'container', 'customAttribution', 'dragPan', 'dragRotate', 'doubleClickZoom', 'hash', 'fadeDuration',\n\t\t'failIfMajorPerformanceCaveat', 'fitBoundsOptions', 'interactive', 'keyboard', 'locale', 'localIdeographFontFamily', 'logoPosition', 'maxBounds',\n\t\t'maxPitch', 'maxZoom', 'minPitch', 'minZoom', 'preserveDrawingBuffer', 'pitch', 'pitchWithRotate', 'refreshExpiredTiles', 'renderWorldCopies',\n\t\t'scrollZoom', 'mapStyle', 'trackResize', 'transformRequest', 'touchZoomRotate', 'touchPitch', 'zoom', 'maxTileCacheSize', 'pixelRatio',\n\t\t'cooperativeGestures'\n\t];\n\n\tstatic readonly MARKER_OPTION_KEYS: Array<keyof MarkerOptions> = [\n\t\t'element', 'offset', 'anchor', 'color', 'draggable', 'clickTolerance', 'rotation', 'rotationAlignment', 'pitchAlignment', 'scale'\n\t];\n\n\tstatic readonly POPUP_OPTION_KEYS: Array<keyof PopupOptions> = [\n          'closeButton', 'closeOnClick', 'closeOnMove', 'focusAfterOpen', 'anchor', 'offset', 'className', 'maxWidth'\n\t];\n\n\tstatic readonly MAP_EVENT_TYPES = [\n\t\t'error', 'load', 'idle', 'remove', 'render', 'resize', 'webglcontextlost', 'webglcontextrestored', 'dataloading', 'data', 'tiledataloading',\n\t\t'sourcedataloading', 'styledataloading', 'sourcedata', 'styledata', 'boxzoomcancel', 'boxzoomstart', 'boxzoomend', 'touchcancel', 'touchmove',\n\t\t'touchend', 'touchstart', 'click', 'contextmenu', 'dblclick', 'mousemove', 'mouseup', 'mousedown', 'mouseout', 'mouseover', 'movestart', 'move',\n\t\t'moveend', 'zoomstart', 'zoom', 'zoomend', 'rotatestart', 'rotate', 'rotateend', 'dragstart', 'drag', 'dragend', 'pitchstart', 'pitch', 'pitchend',\n\t\t'wheel'\n\t];\n\n\tstatic createEventHandler(component: InstanceType<typeof MglMap>, map: Map, ctx: {\n\t\temit: (t: string, payload: any) => void\n\t}, eventName: string): MapEventHandler {\n\t\treturn (payload = {}) => ctx.emit(eventName, { type: payload.type, map, component, event: payload } as MglEvent);\n\t}\n\n}\n","export enum Position {\n\tTOP_LEFT     = 'top-left',\n\tTOP_RIGHT    = 'top-right',\n\tBOTTOM_LEFT  = 'bottom-left',\n\tBOTTOM_RIGHT = 'bottom-right'\n}\n\nexport const PositionValues = Object.values(Position);\n\nexport type PositionProp = Position | 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right';\n","import { MglMap } from '@/lib/components';\nimport maplibregl from 'maplibre-gl';\nimport { reactive, ShallowRef } from 'vue';\nimport { ValidLanguages } from '@/lib/types';\n\nexport interface MapInstance {\n\tcomponent?: InstanceType<typeof MglMap>;\n\tmap?: maplibregl.Map;\n\tisMounted: boolean;\n\tisLoaded: boolean;\n\tlanguage: ValidLanguages | null;\n}\n\nconst instances  = new Map<symbol | string, MapInstance>(),\n\t  defaultKey = Symbol('default');\n\n// useMap returns reactive version of MapInstance\nexport function useMap(key: symbol | string = defaultKey): MapInstance {\n\tlet component = instances.get(key);\n\tif (!component) {\n\t\tcomponent = reactive({ isLoaded: false, isMounted: false, language: null });\n\t\tinstances.set(key, component);\n\t}\n\treturn component;\n}\n\nexport function registerMap(instance: InstanceType<typeof MglMap>, map: ShallowRef<maplibregl.Map | undefined>, key: symbol | string = defaultKey): MapInstance {\n\tlet component = instances.get(key);\n\tif (!component) {\n\t\tcomponent = reactive({ isLoaded: false, isMounted: false, language: null });\n\t\tinstances.set(key, component);\n\t}\n\n\tcomponent.isLoaded  = false;\n\tcomponent.isMounted = false;\n\tcomponent.component = instance;\n\tcomponent.map       = map.value;\n\tcomponent.isLoaded  = map.value?.loaded() || false;\n\n\treturn component;\n}\n","export function debounce(fn: Function, wait = 250, immediate = false) {\n\tlet timeout: number | undefined;\n\n\tfunction debounced(/* ...args */) {\n\t\tconst args = arguments;\n\n\t\tconst later = () => {\n\t\t\ttimeout = undefined;\n\t\t\tif (immediate !== true) {\n\t\t\t\t// @ts-ignore\n\t\t\t\tfn.apply(this, args);\n\t\t\t}\n\t\t};\n\n\t\tclearTimeout(timeout!);\n\t\tif (immediate === true && timeout === undefined) {\n\t\t\t// @ts-ignore\n\t\t\tfn.apply(this, args);\n\t\t}\n\t\ttimeout = window.setTimeout(later, wait);\n\t}\n\n\tdebounced.cancel = () => {\n\t\tclearTimeout(timeout!);\n\t};\n\n\treturn debounced;\n}\n","import type { Map, SymbolLayerSpecification } from \"maplibre-gl\";\n\n/**\n * Languages. Note that not all the languages of this list are available but the compatibility list may be expanded in the future.\n */\nconst Language = {\n  /**\n   * AUTO mode uses the language of the browser\n   */\n  AUTO: \"auto\",\n\n  /**\n   * STYLE is a custom flag to keep the language of the map as defined into the style.\n   * If STYLE is set in the constructor, then further modification of the language\n   * with `.setLanguage()` is not possible.\n   */\n  STYLE_LOCK: \"style_lock\",\n\n  /**\n   * Default fallback languages that uses latin charaters\n   */\n  LATIN: \"latin\",\n\n  /**\n   * Default fallback languages that uses non-latin charaters\n   */\n  NON_LATIN: \"nonlatin\",\n\n  /**\n   * Labels are in their local language, when available\n   */\n  LOCAL: \"\",\n\n  ALBANIAN: \"sq\",\n  AMHARIC: \"am\",\n  ARABIC: \"ar\",\n  ARMENIAN: \"hy\",\n  AZERBAIJANI: \"az\",\n  BASQUE: \"eu\",\n  BELORUSSIAN: \"be\",\n  BOSNIAN: \"bs\",\n  BRETON: \"br\",\n  BULGARIAN: \"bg\",\n  CATALAN: \"ca\",\n  CHINESE: \"zh\",\n  CORSICAN: \"co\",\n  CROATIAN: \"hr\",\n  CZECH: \"cs\",\n  DANISH: \"da\",\n  DUTCH: \"nl\",\n  ENGLISH: \"en\",\n  ESPERANTO: \"eo\",\n  ESTONIAN: \"et\",\n  FINNISH: \"fi\",\n  FRENCH: \"fr\",\n  FRISIAN: \"fy\",\n  GEORGIAN: \"ka\",\n  GERMAN: \"de\",\n  GREEK: \"el\",\n  HEBREW: \"he\",\n  HINDI: \"hi\",\n  HUNGARIAN: \"hu\",\n  ICELANDIC: \"is\",\n  INDONESIAN: \"id\",\n  IRISH: \"ga\",\n  ITALIAN: \"it\",\n  JAPANESE: \"ja\",\n  JAPANESE_HIRAGANA: \"ja-Hira\",\n  JAPANESE_KANA: \"ja_kana\",\n  JAPANESE_LATIN: \"ja_rm\",\n  JAPANESE_2018: \"ja-Latn\",\n  KANNADA: \"kn\",\n  KAZAKH: \"kk\",\n  KOREAN: \"ko\",\n  KOREAN_LATIN: \"ko-Latn\",\n  KURDISH: \"ku\",\n  ROMAN_LATIN: \"la\",\n  LATVIAN: \"lv\",\n  LITHUANIAN: \"lt\",\n  LUXEMBOURGISH: \"lb\",\n  MACEDONIAN: \"mk\",\n  MALAYALAM: \"ml\",\n  MALTESE: \"mt\",\n  NORWEGIAN: \"no\",\n  OCCITAN: \"oc\",\n  POLISH: \"pl\",\n  PORTUGUESE: \"pt\",\n  ROMANIAN: \"ro\",\n  ROMANSH: \"rm\",\n  RUSSIAN: \"ru\",\n  SCOTTISH_GAELIC: \"gd\",\n  SERBIAN_CYRILLIC: \"sr\",\n  SERBIAN_LATIN: \"sr-Latn\",\n  SLOVAK: \"sk\",\n  SLOVENE: \"sl\",\n  SPANISH: \"es\",\n  SWEDISH: \"sv\",\n  TAMIL: \"ta\",\n  TELUGU: \"te\",\n  THAI: \"th\",\n  TURKISH: \"tr\",\n  UKRAINIAN: \"uk\",\n  WELSH: \"cy\",\n} as const;\n\nconst languagesIsoSet = new Set(Object.values(Language) as Array<string>);\n\nfunction isLanguageSupported(lang: string): boolean {\n  return languagesIsoSet.has(lang);\n}\n\nconst languageCodeSet = new Set(Object.values(Language));\n\n/**\n * Type representing the key of the Language object\n */\ntype LanguageKey = keyof typeof Language;\n\ntype Values<T> = T[keyof T];\n\n/**\n * Built-in languages values as strings\n */\ntype LanguageString = Values<typeof Language>;\n\nfunction getBrowserLanguage(): LanguageString {\n  if (typeof navigator === \"undefined\") {\n    return Intl.DateTimeFormat()\n      .resolvedOptions()\n      .locale.split(\"-\")[0] as LanguageString;\n  }\n\n  const canditatelangs = Array.from(\n    new Set(navigator.languages.map((l) => l.split(\"-\")[0]))\n  ).filter((l) => languageCodeSet.has(l as LanguageString));\n\n  return canditatelangs.length\n    ? (canditatelangs[0] as LanguageString)\n    : Language.LATIN;\n}\n\nfunction setPrimaryLanguage(map: Map, lang: string) {\n  const layers = map.getStyle().layers;\n\n  // detects pattern like \"{name:somelanguage}\" with loose spacing\n  const strLanguageRegex = /^\\s*{\\s*name\\s*(:\\s*(\\S*))?\\s*}$/;\n\n  // detects pattern like \"name:somelanguage\" with loose spacing\n  const strLanguageInArrayRegex = /^\\s*name\\s*(:\\s*(\\S*))?\\s*$/;\n\n  // for string based bilingual lang such as \"{name:latin}  {name:nonlatin}\" or \"{name:latin}  {name}\"\n  const strBilingualRegex =\n    /^\\s*{\\s*name\\s*(:\\s*(\\S*))?\\s*}(\\s*){\\s*name\\s*(:\\s*(\\S*))?\\s*}$/;\n\n  // Regex to capture when there are more info, such as mountains elevation with unit m/ft\n  const strMoreInfoRegex = /^(.*)({\\s*name\\s*(:\\s*(\\S*))?\\s*})(.*)$/;\n\n  const langStr = lang ? `name:${lang}` : \"name\"; // to handle local lang\n  const replacer = [\n    \"case\",\n    [\"has\", langStr],\n    [\"get\", langStr],\n    [\"get\", \"name\"],\n  ];\n\n  for (let i = 0; i < layers.length; i += 1) {\n    const layer = layers[i] as SymbolLayerSpecification;\n    const layout = layer.layout;\n\n    if (!layout) {\n      continue;\n    }\n\n    if (!layout[\"text-field\"]) {\n      continue;\n    }\n\n    const textFieldLayoutProp = map.getLayoutProperty(layer.id, \"text-field\");\n\n    // Note:\n    // The value of the 'text-field' property can take multiple shape;\n    // 1. can be an array with 'concat' on its first element (most likely means bilingual)\n    // 2. can be an array with 'get' on its first element (monolingual)\n    // 3. can be a string of shape '{name:latin}'\n    // 4. can be a string referencing another prop such as '{housenumber}' or '{ref}'\n    //\n    // The case 1, 2 and 3 will be updated while maintaining their original type and shape.\n    // The case 3 will not be updated\n\n    let regexMatch;\n\n    // This is case 1\n    if (\n      Array.isArray(textFieldLayoutProp) &&\n      textFieldLayoutProp.length >= 2 &&\n      textFieldLayoutProp[0].trim().toLowerCase() === \"concat\"\n    ) {\n      const newProp = textFieldLayoutProp.slice(); // newProp is Array\n      // The style could possibly have defined more than 2 concatenated language strings but we only want to edit the first\n      // The style could also define that there are more things being concatenated and not only languages\n\n      for (let j = 0; j < textFieldLayoutProp.length; j += 1) {\n        const elem = textFieldLayoutProp[j];\n\n        // we are looking for an elem of shape '{name:somelangage}' (string) of `[\"get\", \"name:somelanguage\"]` (array)\n\n        // the entry of of shape '{name:somelangage}', possibly with loose spacing\n        if (\n          (typeof elem === \"string\" || elem instanceof String) &&\n          strLanguageRegex.exec(elem.toString())\n        ) {\n          newProp[j] = replacer;\n          break; // we just want to update the primary language\n        }\n        // the entry is of an array of shape `[\"get\", \"name:somelanguage\"]`\n        else if (\n          Array.isArray(elem) &&\n          elem.length >= 2 &&\n          elem[0].trim().toLowerCase() === \"get\" &&\n          strLanguageInArrayRegex.exec(elem[1].toString())\n        ) {\n          newProp[j] = replacer;\n          break; // we just want to update the primary language\n        } else if (\n          Array.isArray(elem) &&\n          elem.length === 4 &&\n          elem[0].trim().toLowerCase() === \"case\"\n        ) {\n          newProp[j] = replacer;\n          break; // we just want to update the primary language\n        }\n      }\n\n      map.setLayoutProperty(layer.id, \"text-field\", newProp);\n    }\n\n    // This is case 2\n    else if (\n      Array.isArray(textFieldLayoutProp) &&\n      textFieldLayoutProp.length >= 2 &&\n      textFieldLayoutProp[0].trim().toLowerCase() === \"get\" &&\n      strLanguageInArrayRegex.exec(textFieldLayoutProp[1].toString())\n    ) {\n      const newProp = replacer;\n      map.setLayoutProperty(layer.id, \"text-field\", newProp);\n    }\n\n    // This is case 3\n    else if (\n      (typeof textFieldLayoutProp === \"string\" ||\n        textFieldLayoutProp instanceof String) &&\n      strLanguageRegex.exec(textFieldLayoutProp.toString())\n    ) {\n      const newProp = replacer;\n      map.setLayoutProperty(layer.id, \"text-field\", newProp);\n    } else if (\n      Array.isArray(textFieldLayoutProp) &&\n      textFieldLayoutProp.length === 4 &&\n      textFieldLayoutProp[0].trim().toLowerCase() === \"case\"\n    ) {\n      const newProp = replacer;\n      map.setLayoutProperty(layer.id, \"text-field\", newProp);\n    } else if (\n      (typeof textFieldLayoutProp === \"string\" ||\n        textFieldLayoutProp instanceof String) &&\n      (regexMatch = strBilingualRegex.exec(textFieldLayoutProp.toString())) !==\n        null\n    ) {\n      const newProp = `{${langStr}}${regexMatch[3]}{name${\n        regexMatch[4] || \"\"\n      }}`;\n      map.setLayoutProperty(layer.id, \"text-field\", newProp);\n    } else if (\n      (typeof textFieldLayoutProp === \"string\" ||\n        textFieldLayoutProp instanceof String) &&\n      (regexMatch = strMoreInfoRegex.exec(textFieldLayoutProp.toString())) !==\n        null\n    ) {\n      const newProp = `${regexMatch[1]}{${langStr}}${regexMatch[5]}`;\n      map.setLayoutProperty(layer.id, \"text-field\", newProp);\n    }\n  }\n}\n\nfunction setSecondaryLanguage(map: Map, lang: string) {\n  const layers = map.getStyle().layers;\n\n  // detects pattern like \"{name:somelanguage}\" with loose spacing\n  const strLanguageRegex = /^\\s*{\\s*name\\s*(:\\s*(\\S*))?\\s*}$/;\n\n  // detects pattern like \"name:somelanguage\" with loose spacing\n  const strLanguageInArrayRegex = /^\\s*name\\s*(:\\s*(\\S*))?\\s*$/;\n\n  // for string based bilingual lang such as \"{name:latin}  {name:nonlatin}\" or \"{name:latin}  {name}\"\n  const strBilingualRegex =\n    /^\\s*{\\s*name\\s*(:\\s*(\\S*))?\\s*}(\\s*){\\s*name\\s*(:\\s*(\\S*))?\\s*}$/;\n\n  let regexMatch;\n\n  for (let i = 0; i < layers.length; i += 1) {\n    const layer = layers[i] as SymbolLayerSpecification;\n    const layout = layer.layout;\n\n    if (!layout) {\n      continue;\n    }\n\n    if (!layout[\"text-field\"]) {\n      continue;\n    }\n\n    const textFieldLayoutProp = map.getLayoutProperty(layer.id, \"text-field\");\n\n    let newProp;\n\n    // Note:\n    // The value of the 'text-field' property can take multiple shape;\n    // 1. can be an array with 'concat' on its first element (most likely means bilingual)\n    // 2. can be an array with 'get' on its first element (monolingual)\n    // 3. can be a string of shape '{name:latin}'\n    // 4. can be a string referencing another prop such as '{housenumber}' or '{ref}'\n    //\n    // Only the case 1 will be updated because we don't want to change the styling (read: add a secondary language where the original styling is only displaying 1)\n\n    // This is case 1\n    if (\n      Array.isArray(textFieldLayoutProp) &&\n      textFieldLayoutProp.length >= 2 &&\n      textFieldLayoutProp[0].trim().toLowerCase() === \"concat\"\n    ) {\n      newProp = textFieldLayoutProp.slice(); // newProp is Array\n      // The style could possibly have defined more than 2 concatenated language strings but we only want to edit the first\n      // The style could also define that there are more things being concatenated and not only languages\n\n      let languagesAlreadyFound = 0;\n\n      for (let j = 0; j < textFieldLayoutProp.length; j += 1) {\n        const elem = textFieldLayoutProp[j];\n\n        // we are looking for an elem of shape '{name:somelangage}' (string) of `[\"get\", \"name:somelanguage\"]` (array)\n\n        // the entry of of shape '{name:somelangage}', possibly with loose spacing\n        if (\n          (typeof elem === \"string\" || elem instanceof String) &&\n          strLanguageRegex.exec(elem.toString())\n        ) {\n          if (languagesAlreadyFound === 1) {\n            newProp[j] = `{name:${lang}}`;\n            break; // we just want to update the secondary language\n          }\n\n          languagesAlreadyFound += 1;\n        }\n        // the entry is of an array of shape `[\"get\", \"name:somelanguage\"]`\n        else if (\n          Array.isArray(elem) &&\n          elem.length >= 2 &&\n          elem[0].trim().toLowerCase() === \"get\" &&\n          strLanguageInArrayRegex.exec(elem[1].toString())\n        ) {\n          if (languagesAlreadyFound === 1) {\n            newProp[j][1] = `name:${lang}`;\n            break; // we just want to update the secondary language\n          }\n\n          languagesAlreadyFound += 1;\n        } else if (\n          Array.isArray(elem) &&\n          elem.length === 4 &&\n          elem[0].trim().toLowerCase() === \"case\"\n        ) {\n          if (languagesAlreadyFound === 1) {\n            newProp[j] = [\"get\", `name:${lang}`]; // the situation with 'case' is supposed to only happen with the primary lang\n            break; // but in case a styling also does that for secondary...\n          }\n\n          languagesAlreadyFound += 1;\n        }\n      }\n\n      map.setLayoutProperty(layer.id, \"text-field\", newProp);\n    }\n\n    // the language (both first and second) are defined into a single string model\n    else if (\n      (typeof textFieldLayoutProp === \"string\" ||\n        textFieldLayoutProp instanceof String) &&\n      (regexMatch = strBilingualRegex.exec(textFieldLayoutProp.toString())) !==\n        null\n    ) {\n      const langStr = lang ? `name:${lang}` : \"name\"; // to handle local lang\n      newProp = `{name${regexMatch[1] || \"\"}}${regexMatch[3]}{${langStr}}`;\n      map.setLayoutProperty(layer.id, \"text-field\", newProp);\n    }\n  }\n}\n\nexport {\n  Language,\n  getBrowserLanguage,\n  isLanguageSupported,\n  setPrimaryLanguage,\n  setSecondaryLanguage,\n};\n\nexport type { LanguageString, LanguageKey };\n","import {\n\tdefineComponent,\n\tgetCurrentInstance,\n\th,\n\tmarkRaw,\n\tnextTick,\n\tonBeforeUnmount,\n\tonMounted,\n\tPropType,\n\tprovide,\n\tref,\n\tshallowRef,\n\tSlotsType,\n\ttoRef,\n\tunref,\n\twatch\n} from 'vue';\nimport {\n\tFitBoundsOptions,\n\tGestureOptions,\n\tLngLatBoundsLike,\n\tLngLatLike,\n\tMap as MaplibreMap,\n\tMapOptions,\n\tRequestTransformFunction,\n\tStyleSpecification\n} from 'maplibre-gl';\nimport { componentIdSymbol, emitterSymbol, isInitializedSymbol, isLoadedSymbol, mapSymbol, MglEvents, sourceIdSymbol, ValidLanguages } from '@/lib/types';\nimport { defaults } from '@/lib/defaults';\nimport { MapLib } from '@/lib/lib/map.lib';\nimport { Position } from '@/lib/components/controls/position.enum';\nimport mitt from 'mitt';\nimport { registerMap } from '@/lib/lib/mapRegistry';\nimport { debounce } from '@/lib/lib/debounce';\nimport { setPrimaryLanguage } from 'modular-maptiler-sdk/src/language';\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglMap',\n\tprops: {\n\t\twidth                       : { type: [ Number, String ] as PropType<number | string>, default: '100%' },\n\t\theight                      : { type: [ Number, String ] as PropType<number | string>, default: '100%' },\n\t\tantialias                   : { type: Boolean as PropType<boolean>, default: () => defaults.antialias },\n\t\tattributionControl          : { type: Boolean as PropType<boolean>, default: () => defaults.attributionControl },\n\t\tbearing                     : { type: Number as PropType<number>, default: () => defaults.bearing },\n\t\tbearingSnap                 : { type: Number as PropType<number>, default: () => defaults.bearingSnap },\n\t\tbounds                      : { type: [ Array, Object ] as PropType<LngLatBoundsLike>, default: () => defaults.bounds },\n\t\tboxZoom                     : { type: Boolean as PropType<boolean>, default: () => defaults.boxZoom },\n\t\tcenter                      : { type: [ Array, Object ] as PropType<LngLatLike>, default: () => defaults.center },\n\t\tclickTolerance              : { type: Number as PropType<number>, default: () => defaults.clickTolerance },\n\t\tcollectResourceTiming       : { type: Boolean as PropType<boolean>, default: () => defaults.collectResourceTiming },\n\t\tcrossSourceCollisions       : { type: Boolean as PropType<boolean>, default: () => defaults.crossSourceCollisions },\n\t\tcustomAttribution           : { type: [ String, Array ] as PropType<string | string[]>, default: () => defaults.customAttribution },\n\t\tdragPan                     : { type: Boolean as PropType<boolean>, default: () => defaults.dragPan },\n\t\tdragRotate                  : { type: Boolean as PropType<boolean>, default: () => defaults.dragRotate },\n\t\tdoubleClickZoom             : { type: Boolean as PropType<boolean>, default: () => defaults.doubleClickZoom },\n\t\thash                        : { type: [ Boolean, String ] as PropType<boolean | string>, default: () => defaults.hash },\n\t\tfadeDuration                : { type: Number as PropType<number>, default: () => defaults.fadeDuration },\n\t\tfailIfMajorPerformanceCaveat: { type: Boolean as PropType<boolean>, default: () => defaults.failIfMajorPerformanceCaveat },\n\t\tfitBoundsOptions            : { type: Object as PropType<FitBoundsOptions>, default: () => defaults.fitBoundsOptions },\n\t\tinteractive                 : { type: Boolean as PropType<boolean>, default: () => defaults.interactive },\n\t\tkeyboard                    : { type: Boolean as PropType<boolean>, default: () => defaults.keyboard },\n\t\tlocale                      : { type: Object as PropType<Record<string, string>>, default: () => defaults.locale },\n\t\tlanguage                    : { type: String as PropType<ValidLanguages | null>, default: () => defaults.language || null },\n\t\tlocalIdeographFontFamily    : { type: String as PropType<string>, default: () => defaults.localIdeographFontFamily },\n\t\tlogoPosition                : {\n\t\t\ttype     : [ String ] as PropType<Position>,\n\t\t\tvalidator: (val: any) => val in Position,\n\t\t\tdefault  : () => defaults.logoPosition,\n\t\t},\n\t\tmaxBounds                   : { type: [ Array, Object ] as PropType<LngLatBoundsLike>, default: () => defaults.maxBounds },\n\t\tmaxPitch                    : { type: Number as PropType<number>, default: () => defaults.maxPitch },\n\t\tmaxZoom                     : { type: Number as PropType<number>, default: () => defaults.maxZoom },\n\t\tminPitch                    : { type: Number as PropType<number>, default: () => defaults.minPitch },\n\t\tminZoom                     : { type: Number as PropType<number>, default: () => defaults.minZoom },\n\t\tpreserveDrawingBuffer       : { type: Boolean as PropType<boolean>, default: () => defaults.preserveDrawingBuffer },\n\t\tpitch                       : { type: Number as PropType<number>, default: () => defaults.pitch },\n\t\tpitchWithRotate             : { type: Boolean as PropType<boolean>, default: () => defaults.pitchWithRotate },\n\t\trefreshExpiredTiles         : { type: Boolean as PropType<boolean>, default: () => defaults.refreshExpiredTiles },\n\t\trenderWorldCopies           : { type: Boolean as PropType<boolean>, default: () => defaults.renderWorldCopies },\n\t\tscrollZoom                  : { type: Boolean as PropType<boolean>, default: () => defaults.scrollZoom },\n\t\t// StyleSpecification triggers TS7056, so users must handle typings themselves\n\t\tmapStyle           : { type: [ String, Object ] as PropType<object | string>, default: () => defaults.style },\n\t\ttrackResize        : { type: Boolean as PropType<boolean>, default: () => defaults.trackResize },\n\t\ttransformRequest   : { type: Function as PropType<RequestTransformFunction>, default: defaults.transformRequest },\n\t\ttouchZoomRotate    : { type: Boolean as PropType<boolean>, default: () => defaults.touchZoomRotate },\n\t\ttouchPitch         : { type: Boolean as PropType<boolean>, default: () => defaults.touchPitch },\n\t\tzoom               : { type: Number as PropType<number>, default: () => defaults.zoom },\n\t\tmaxTileCacheSize   : { type: Number as PropType<number>, default: () => defaults.maxTileCacheSize },\n\t\tmapKey             : { type: [ String, Symbol ] as PropType<string | symbol> },\n\t\tpixelRatio         : { type: Number as PropType<number>, default: () => defaults.pixelRatio },\n\t\tcooperativeGestures: { type: [ Boolean, Object ] as PropType<boolean | GestureOptions>, default: () => defaults.cooperativeGestures }\n\t},\n\temits: [\n\t\t'map:error', 'map:load', 'map:idle', 'map:remove', 'map:render', 'map:resize', 'map:webglcontextlost', 'map:webglcontextrestored', 'map:dataloading',\n\t\t'map:data', 'map:tiledataloading', 'map:sourcedataloading', 'map:styledataloading', 'map:sourcedata', 'map:styledata', 'map:boxzoomcancel',\n\t\t'map:boxzoomstart', 'map:boxzoomend', 'map:touchcancel', 'map:touchmove', 'map:touchend', 'map:touchstart', 'map:click', 'map:contextmenu',\n\t\t'map:dblclick', 'map:mousemove', 'map:mouseup', 'map:mousedown', 'map:mouseout', 'map:mouseover', 'map:movestart', 'map:move', 'map:moveend',\n\t\t'map:zoomstart', 'map:zoom', 'map:zoomend', 'map:rotatestart', 'map:rotate', 'map:rotateend', 'map:dragstart', 'map:drag', 'map:dragend',\n\t\t'map:pitchstart', 'map:pitch', 'map:pitchend', 'map:wheel'\n\t],\n\tslots: Object as SlotsType<{ default: {} }>,\n\tsetup(props, ctx) {\n\n\t\tconst component      = markRaw(getCurrentInstance()!),\n\t\t\t  container      = shallowRef<HTMLDivElement>(),\n\t\t\t  map            = shallowRef<MaplibreMap>(),\n\t\t\t  isInitialized  = ref(false),\n\t\t\t  isLoaded       = ref(false),\n\t\t\t  isStyleReady   = ref(false),\n\t\t\t  boundMapEvents = new Map<string, Function>(),\n\t\t\t  emitter        = mitt<MglEvents>(),\n\t\t\t  registryItem   = registerMap(component as any, map, props.mapKey);\n\n\t\tlet resizeObserver: ResizeObserver | undefined;\n\n\t\tprovide(mapSymbol, map);\n\t\tprovide(isLoadedSymbol, isLoaded);\n\t\tprovide(isInitializedSymbol, isInitialized);\n\t\tprovide(componentIdSymbol, component.uid);\n\t\tprovide(sourceIdSymbol, '');\n\t\tprovide(emitterSymbol, emitter);\n\n\t\t/*\n\t\t * bind prop watchers\n\t\t */\n\t\twatch(toRef(props, 'bearing'), v => {\n\t\t\tif (v) {\n\t\t\t\tmap.value?.setBearing(v);\n\t\t\t}\n\t\t});\n\t\twatch(toRef(props, 'bounds'), v => {\n\t\t\tif (v) {\n\t\t\t\tmap.value?.fitBounds(v, props.fitBoundsOptions);\n\t\t\t}\n\t\t});\n\t\twatch(toRef(props, 'center'), v => {\n\t\t\tif (v) {\n\t\t\t\tmap.value?.setCenter(v);\n\t\t\t}\n\t\t});\n\t\twatch(toRef(props, 'maxBounds'), v => {\n\t\t\tif (v) {\n\t\t\t\tmap.value?.setMaxBounds(v);\n\t\t\t}\n\t\t});\n\t\twatch(toRef(props, 'maxPitch'), v => {\n\t\t\tif (v) {\n\t\t\t\tmap.value?.setMaxPitch(v);\n\t\t\t}\n\t\t});\n\t\twatch(toRef(props, 'maxZoom'), v => {\n\t\t\tif (v) {\n\t\t\t\tmap.value?.setMaxZoom(v);\n\t\t\t}\n\t\t});\n\t\twatch(toRef(props, 'minPitch'), v => {\n\t\t\tif (v) {\n\t\t\t\tmap.value?.setMinPitch(v);\n\t\t\t}\n\t\t});\n\t\twatch(toRef(props, 'minZoom'), v => {\n\t\t\tif (v) {\n\t\t\t\tmap.value?.setMinZoom(v);\n\t\t\t}\n\t\t});\n\t\twatch(toRef(props, 'pitch'), v => {\n\t\t\tif (v) {\n\t\t\t\tmap.value?.setPitch(v);\n\t\t\t}\n\t\t});\n\t\twatch(toRef(props, 'renderWorldCopies'), v => {\n\t\t\tif (v) {\n\t\t\t\tmap.value?.setRenderWorldCopies(v);\n\t\t\t}\n\t\t});\n\t\twatch(toRef(props, 'mapStyle'), v => {\n\t\t\tif (v) {\n\t\t\t\tmap.value?.setStyle(v as StyleSpecification);\n\t\t\t}\n\t\t});\n\t\twatch(toRef(props, 'transformRequest'), v => {\n\t\t\tif (v) {\n\t\t\t\tmap.value?.setTransformRequest(v);\n\t\t\t}\n\t\t});\n\t\twatch(toRef(props, 'zoom'), v => {\n\t\t\tif (v) {\n\t\t\t\tmap.value?.setZoom(v);\n\t\t\t}\n\t\t});\n\t\twatch(toRef(props, 'zoom'), v => {\n\t\t\tif (v) {\n\t\t\t\tmap.value?.setZoom(v);\n\t\t\t}\n\t\t});\n\t\twatch(toRef(props, 'language'), v => {\n\t\t\tif (isStyleReady.value && map.value && registryItem.language !== (v || null)) {\n\t\t\t\tsetPrimaryLanguage(map.value as any, v || '');\n\t\t\t\tregistryItem.language = v || null;\n\t\t\t}\n\t\t});\n\t\twatch(toRef(registryItem, 'language'), v => {\n\t\t\tif (isStyleReady.value && map.value) {\n\t\t\t\tsetPrimaryLanguage(map.value as any, v || '');\n\t\t\t}\n\t\t});\n\n\t\tfunction onStyleReady() {\n\t\t\tisStyleReady.value = true;\n\t\t\tif (props.language) {\n\t\t\t\tregistryItem.language = props.language;\n\t\t\t} else if (registryItem.language) {\n\t\t\t\tsetPrimaryLanguage(map.value! as any, props.language || '');\n\t\t\t}\n\t\t}\n\n\t\tfunction initialize() {\n\n\t\t\tregistryItem.isMounted = true;\n\n\t\t\t// build options\n\t\t\tconst opts: MapOptions = Object.keys(props)\n\t\t\t\t\t\t\t\t\t\t   .filter(opt => (props as any)[ opt ] !== undefined && MapLib.MAP_OPTION_KEYS.indexOf(opt as keyof MapOptions) !== -1)\n\t\t\t\t\t\t\t\t\t\t   .reduce<MapOptions>((obj, opt) => {\n\t\t\t\t\t\t\t\t\t\t\t   (obj as any)[ opt === 'mapStyle' ? 'style' : opt ] = unref((props as any)[ opt ]);\n\t\t\t\t\t\t\t\t\t\t\t   return obj;\n\t\t\t\t\t\t\t\t\t\t   }, { container: container.value as HTMLDivElement } as any);\n\n\t\t\t// init map\n\t\t\tmap.value           = markRaw(new MaplibreMap(opts));\n\t\t\tregistryItem.map    = map.value;\n\t\t\tisInitialized.value = true;\n\t\t\tboundMapEvents.set('__load', () => (isLoaded.value = true, registryItem.isLoaded = true));\n\t\t\tmap.value.once('styledata', onStyleReady);\n\t\t\tmap.value.on('load', boundMapEvents.get('__load') as any);\n\n\t\t\t// bind events\n\t\t\tif (component.vnode.props) {\n\t\t\t\tfor (let i = 0, len = MapLib.MAP_EVENT_TYPES.length; i < len; i++) {\n\t\t\t\t\tif (component.vnode.props[ 'onMap:' + MapLib.MAP_EVENT_TYPES[ i ] ]) {\n\t\t\t\t\t\tconst handler = MapLib.createEventHandler(component as any, map.value, ctx as any, 'map:' + MapLib.MAP_EVENT_TYPES[ i ]);\n\t\t\t\t\t\tboundMapEvents.set(MapLib.MAP_EVENT_TYPES[ i ], handler);\n\t\t\t\t\t\tmap.value.on(MapLib.MAP_EVENT_TYPES[ i ], handler);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// automatic re-initialization of map on CONTEXT_LOST_WEBGL\n\t\t\tmap.value.getCanvas().addEventListener('webglcontextlost', restart);\n\n\t\t}\n\n\t\tasync function dispose() {\n\n\t\t\tregistryItem.isMounted = false;\n\t\t\tregistryItem.isLoaded  = false;\n\t\t\tisLoaded.value         = false;\n\n\t\t\tif (map.value) {\n\t\t\t\t// unbind events\n\t\t\t\tmap.value.getCanvas().removeEventListener('webglcontextlost', restart);\n\t\t\t\tmap.value._controls.forEach((control) => {\n\t\t\t\t\tmap.value!.removeControl(control);\n\t\t\t\t});\n\t\t\t\tisInitialized.value = false;\n\t\t\t\tboundMapEvents.forEach((func, en) => {\n\t\t\t\t\tmap.value!.off(en.startsWith('__') ? en.substring(2) : en, func as any);\n\t\t\t\t});\n\t\t\t\t// destroy map\n\t\t\t\tmap.value.remove();\n\t\t\t}\n\n\t\t}\n\n\t\tfunction restart() {\n\t\t\tdispose();\n\t\t\tnextTick(initialize);\n\t\t}\n\n\t\t/*\n\t\t * init map\n\t\t */\n\t\tonMounted(() => {\n\n\t\t\tinitialize();\n\n\t\t\t// bind resize observer\n\t\t\tif (map.value) {\n\t\t\t\tresizeObserver = new ResizeObserver(debounce(map.value.resize.bind(map.value), 100));\n\t\t\t\tresizeObserver.observe(container.value as HTMLDivElement);\n\t\t\t}\n\n\t\t});\n\n\t\t/*\n\t\t * Dispose component\n\t\t */\n\t\tonBeforeUnmount(() => {\n\n\t\t\t// unbind resize observer\n\t\t\tif (resizeObserver !== undefined) {\n\t\t\t\tresizeObserver.disconnect();\n\t\t\t\tresizeObserver = undefined;\n\t\t\t}\n\n\t\t\tdispose();\n\n\t\t});\n\n\t\tctx.expose({ map });\n\n\t\treturn () => h(\n\t\t\t'div',\n\t\t\t{\n\t\t\t\t'class': 'mgl-container',\n\t\t\t\tstyle  : { height: props.height, width: props.width }\n\t\t\t},\n\t\t\t[\n\t\t\t\th('div', { ref: container, 'class': 'mgl-wrapper' }),\n\t\t\t\tisInitialized.value && ctx.slots.default ? ctx.slots.default({}) : undefined\n\t\t\t]\n\t\t);\n\n\t}\n});\n","import { WatchSource } from '@vue/runtime-core';\nimport { ShallowRef, watch } from 'vue';\nimport { IControl, Map } from 'maplibre-gl';\nimport { Position, PositionProp, PositionValues } from '@/lib/components/controls/position.enum';\n\nexport function usePositionWatcher(source: WatchSource<PositionProp | undefined>, map: ShallowRef<Map | undefined>, control: IControl) {\n\twatch(source, (v) => {\n\t\tif (v && PositionValues.indexOf(v as Position) === -1) {\n\t\t\treturn;\n\t\t}\n\t\tif (map.value?.hasControl(control)) {\n\t\t\tmap.value.removeControl(control);\n\t\t}\n\t\tmap.value?.addControl(control, v);\n\t}, { immediate: true });\n}","import { defineComponent, inject, onBeforeUnmount, PropType, toRef } from 'vue';\nimport { AttributionControl } from 'maplibre-gl';\nimport { Position, PositionProp, PositionValues } from '@/lib/components/controls/position.enum';\nimport { isInitializedSymbol, mapSymbol } from '@/lib/types';\nimport { usePositionWatcher } from '@/lib/composable/usePositionWatcher';\n\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglAttributionControl',\n\tprops: {\n\t\tposition         : {\n\t\t\ttype     : String as PropType<PositionProp>,\n\t\t\tvalidator: (v: Position) => {\n\t\t\t\treturn PositionValues.indexOf(v) !== -1;\n\t\t\t}\n\t\t},\n\t\tcompact          : Boolean as PropType<boolean>,\n\t\tcustomAttribution: [ String, Array ] as PropType<string | string[]>\n\t},\n\tsetup(props) {\n\n\t\tconst map           = inject(mapSymbol)!,\n\t\t\t  isInitialized = inject(isInitializedSymbol)!,\n\t\t\t  control       = new AttributionControl({ compact: props.compact, customAttribution: props.customAttribution });\n\n\t\tusePositionWatcher(toRef(props, 'position'), map, control);\n\t\tonBeforeUnmount(() => isInitialized.value && map.value!.removeControl(control));\n\n\t},\n\trender() {\n\t\t// nothing\n\t}\n});\n","import { createCommentVNode, defineComponent, h, inject, nextTick, onBeforeUnmount, PropType, ref, Ref, SlotsType, Teleport, toRef, watch } from 'vue';\nimport { Position, PositionProp, PositionValues } from '@/lib/components/controls/position.enum';\nimport { ControlPosition, IControl } from 'maplibre-gl';\nimport { isInitializedSymbol, mapSymbol } from '@/lib/types';\nimport { usePositionWatcher } from '@/lib/composable/usePositionWatcher';\n\n\nexport class CustomControl implements IControl {\n\n\tpublic static readonly CONTROL_CLASS       = 'maplibregl-ctrl';\n\tpublic static readonly CONTROL_GROUP_CLASS = 'maplibregl-ctrl-group';\n\n\tpublic readonly container: HTMLDivElement;\n\n\tconstructor(private isAdded: Ref<boolean>, noClasses: boolean) {\n\t\tthis.container = document.createElement('div');\n\t\tthis.setClasses(noClasses);\n\t}\n\n\tgetDefaultPosition(): ControlPosition {\n\t\treturn Position.TOP_LEFT;\n\t}\n\n\tonAdd(): HTMLElement {\n\t\tnextTick(() => this.isAdded.value = true);\n\t\treturn this.container;\n\t}\n\n\tonRemove(): void {\n\t\tthis.isAdded.value = false;\n\t\tthis.container.remove();\n\t}\n\n\tsetClasses(noClasses: boolean) {\n\t\tif (noClasses) {\n\t\t\tthis.container.classList.remove(CustomControl.CONTROL_CLASS);\n\t\t\tthis.container.classList.remove(CustomControl.CONTROL_GROUP_CLASS);\n\t\t} else {\n\t\t\tthis.container.classList.add(CustomControl.CONTROL_CLASS);\n\t\t\tthis.container.classList.add(CustomControl.CONTROL_GROUP_CLASS);\n\t\t}\n\t}\n\n}\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglCustomControl',\n\tprops: {\n\t\tposition : {\n\t\t\ttype     : String as PropType<PositionProp>,\n\t\t\tvalidator: (v: Position) => {\n\t\t\t\treturn PositionValues.indexOf(v) !== -1;\n\t\t\t}\n\t\t},\n\t\tnoClasses: {\n\t\t\ttype   : Boolean as PropType<boolean>,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tslots: Object as SlotsType<{ default: {} }>,\n\tsetup(props, { slots }) {\n\n\t\tconst map           = inject(mapSymbol)!,\n\t\t\t  isInitialized = inject(isInitializedSymbol)!,\n\t\t\t  isAdded       = ref(false),\n\t\t\t  control       = new CustomControl(isAdded, props.noClasses!);\n\n\t\tusePositionWatcher(toRef(props, 'position'), map, control);\n\t\twatch(toRef(props, 'noClasses'), v => control.setClasses(v!));\n\t\tonBeforeUnmount(() => isInitialized.value && map.value?.removeControl(control));\n\n\t\treturn () => {\n\t\t\tif (!isAdded.value) {\n\t\t\t\treturn createCommentVNode('custom-component');\n\t\t\t}\n\t\t\treturn h(\n\t\t\t\tTeleport as any,\n\t\t\t\t{ to: control.container },\n\t\t\t\tslots.default?.({})\n\t\t\t);\n\t\t};\n\n\t}\n});\n","import { defineComponent, inject, nextTick, onBeforeUnmount, PropType, toRef } from 'vue';\nimport { Position, PositionProp, PositionValues } from '@/lib/components/controls/position.enum';\nimport { isInitializedSymbol, mapSymbol } from '@/lib/types';\nimport { FullscreenControl } from 'maplibre-gl';\nimport { usePositionWatcher } from '@/lib/composable/usePositionWatcher';\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglFullscreenControl',\n\tprops: {\n\t\tposition : {\n\t\t\ttype     : String as PropType<PositionProp>,\n\t\t\tdefault  : Position.TOP_RIGHT,\n\t\t\tvalidator: (v: Position) => {\n\t\t\t\treturn PositionValues.indexOf(v) !== -1;\n\t\t\t}\n\t\t},\n\t\tcontainer: {\n\t\t\ttype   : Object as PropType<HTMLElement>,\n\t\t\tdefault: null\n\t\t}\n\t},\n\tsetup(props) {\n\n\t\tconst map           = inject(mapSymbol)!,\n\t\t\t  isInitialized = inject(isInitializedSymbol)!,\n\t\t\t  control       = new FullscreenControl({ container: props.container || undefined });\n\n\t\t// fire map.resize just a 2nd time\n\t\tfunction triggerResize() {\n\t\t\tnextTick(() => map.value?.resize());\n\t\t}\n\n\t\tcontrol.on('fullscreenstart', triggerResize);\n\t\tcontrol.on('fullscreenend', triggerResize);\n\n\t\tusePositionWatcher(toRef(props, 'position'), map, control);\n\t\tonBeforeUnmount(() => {\n\t\t\tcontrol.off('fullscreenstart', triggerResize);\n\t\t\tcontrol.off('fullscreenend', triggerResize);\n\t\t\tisInitialized.value && map.value?.removeControl(control);\n\t\t});\n\n\t},\n\trender() {\n\t\t// nothing\n\t}\n});\n","import { defineComponent, inject, onBeforeUnmount, PropType, toRef } from 'vue';\nimport { IControl, Map as MMap } from 'maplibre-gl';\nimport { Position, PositionProp, PositionValues } from '@/lib/components/controls/position.enum';\nimport { isInitializedSymbol, mapSymbol } from '@/lib/types';\nimport { usePositionWatcher } from '@/lib/composable/usePositionWatcher';\n\nexport class FrameRateControl implements IControl {\n\n\tprivate frames      = 0;\n\tprivate totalTime   = 0;\n\tprivate totalFrames = 0;\n\n\tprivate time: number | null = null;\n\tprivate map?: MMap;\n\tprivate container?: HTMLDivElement;\n\tprivate readOutput?: HTMLDivElement;\n\tprivate canvas?: HTMLCanvasElement;\n\n\tprivate eventHandlers = new Map<string, Function>();\n\n\tconstructor(private background  = 'rgba(0,0,0,0.9)',\n\t\t\t\tprivate barWidth    = 4 * window.devicePixelRatio,\n\t\t\t\tprivate color       = '#7cf859',\n\t\t\t\tprivate font        = 'Monaco, Consolas, Courier, monospace',\n\t\t\t\tprivate graphHeight = 60 * window.devicePixelRatio,\n\t\t\t\tprivate graphWidth  = 90 * window.devicePixelRatio,\n\t\t\t\tprivate graphTop    = 0,\n\t\t\t\tprivate graphRight  = 5 * window.devicePixelRatio,\n\t\t\t\tprivate width       = 100 * window.devicePixelRatio) {\n\t}\n\n\tgetDefaultPosition(): Position {\n\t\treturn Position.TOP_RIGHT;\n\t}\n\n\tonAdd(map: MMap): HTMLElement {\n\t\tthis.map = map;\n\n\t\tconst el     = (this.container = document.createElement('div'));\n\t\tel.className = 'maplibregl-ctrl maplibregl-ctrl-fps';\n\n\t\tel.style.backgroundColor = this.background;\n\t\tel.style.borderRadius    = '6px';\n\n\t\tthis.readOutput                  = document.createElement('div');\n\t\tthis.readOutput.style.color      = this.color;\n\t\tthis.readOutput.style.fontFamily = this.font;\n\t\tthis.readOutput.style.padding    = '0 5px 5px';\n\t\tthis.readOutput.style.fontSize   = '9px';\n\t\tthis.readOutput.style.fontWeight = 'bold';\n\t\tthis.readOutput.textContent      = 'Waitingâ€¦';\n\n\t\tthis.canvas               = document.createElement('canvas');\n\t\tthis.canvas.className     = 'maplibregl-ctrl-canvas';\n\t\tthis.canvas.width         = this.width;\n\t\tthis.canvas.height        = this.graphHeight;\n\t\tthis.canvas.style.cssText = `width: ${this.width / window.devicePixelRatio}px; height: ${this.graphHeight / window.devicePixelRatio}px;`;\n\n\t\tel.appendChild(this.readOutput);\n\t\tel.appendChild(this.canvas);\n\n\t\tthis.eventHandlers.set('movestart', this.onMoveStart.bind(this));\n\t\tthis.eventHandlers.set('moveend', this.onMoveEnd.bind(this));\n\t\tthis.map.on('movestart', this.eventHandlers.get('movestart') as any);\n\t\tthis.map.on('moveend', this.eventHandlers.get('moveend') as any);\n\t\treturn this.container;\n\t}\n\n\tonRemove(): void {\n\t\tthis.map!.off('movestart', this.eventHandlers.get('movestart') as any);\n\t\tthis.map!.off('moveend', this.eventHandlers.get('moveend') as any);\n\t\tthis.eventHandlers.clear();\n\t\tthis.container!.parentNode!.removeChild(this.container!);\n\t\tthis.map = undefined;\n\t}\n\n\tonMoveStart() {\n\t\tthis.frames = 0;\n\t\tthis.time   = performance.now();\n\t\tthis.eventHandlers.set('render', this.onRender.bind(this));\n\t\tthis.map!.on('render', this.eventHandlers.get('render') as any);\n\t}\n\n\tonMoveEnd() {\n\t\tconst now = performance.now();\n\t\tthis.updateGraph(this.getFPS(now));\n\t\tthis.frames = 0;\n\t\tthis.time   = null;\n\t\tthis.map!.off('render', this.eventHandlers.get('render') as any);\n\t}\n\n\tonRender() {\n\t\tif (this.time) {\n\t\t\tthis.frames++;\n\t\t\tconst now = performance.now();\n\t\t\tif (now >= this.time + 1e3) {\n\t\t\t\tthis.updateGraph(this.getFPS(now));\n\t\t\t\tthis.frames = 0;\n\t\t\t\tthis.time   = performance.now();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetFPS(now: number) {\n\t\tthis.totalTime += now - this.time!;\n\t\tthis.totalFrames += this.frames;\n\t\treturn Math.round((1e3 * this.frames) / (now - this.time!)) || 0;\n\t}\n\n\tupdateGraph(fpsNow: number) {\n\t\tconst context = this.canvas!.getContext('2d')!;\n\t\tconst fps     = Math.round((1e3 * this.totalFrames) / this.totalTime) || 0;\n\t\tconst rect    = (this.graphHeight, this.barWidth);\n\n\t\tcontext.fillStyle   = this.background;\n\t\tcontext.globalAlpha = 1;\n\t\tcontext.fillRect(0, 0, this.graphWidth, this.graphTop);\n\t\tcontext.fillStyle = this.color;\n\n\t\tthis.readOutput!.textContent = `${fpsNow} FPS (${fps} Avg)`;\n\t\tcontext.drawImage(\n\t\t\tthis.canvas!,\n\t\t\tthis.graphRight + rect,\n\t\t\tthis.graphTop,\n\t\t\tthis.graphWidth - rect,\n\t\t\tthis.graphHeight,\n\t\t\tthis.graphRight,\n\t\t\tthis.graphTop,\n\t\t\tthis.graphWidth - rect,\n\t\t\tthis.graphHeight\n\t\t);\n\t\tcontext.fillRect(\n\t\t\tthis.graphRight + this.graphWidth - rect,\n\t\t\tthis.graphTop,\n\t\t\trect,\n\t\t\tthis.graphHeight\n\t\t);\n\t\tcontext.fillStyle   = this.background;\n\t\tcontext.globalAlpha = 0.75;\n\t\tcontext.fillRect(\n\t\t\tthis.graphRight + this.graphWidth - rect,\n\t\t\tthis.graphTop,\n\t\t\trect,\n\t\t\t(1 - fpsNow / 100) * this.graphHeight\n\t\t);\n\t}\n\n}\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglFrameRateControl',\n\tprops: {\n\t\tposition   : {\n\t\t\ttype     : String as PropType<PositionProp>,\n\t\t\tvalidator: (v: Position) => {\n\t\t\t\treturn PositionValues.indexOf(v) !== -1;\n\t\t\t}\n\t\t},\n\t\tbackground : {\n\t\t\ttype   : String as PropType<string>,\n\t\t\tdefault: 'rgba(0,0,0,0.9)'\n\t\t},\n\t\tbarWidth   : {\n\t\t\ttype   : Number as PropType<number>,\n\t\t\tdefault: 4 * window.devicePixelRatio\n\t\t},\n\t\tcolor      : {\n\t\t\ttype   : String as PropType<string>,\n\t\t\tdefault: '#7cf859'\n\t\t},\n\t\tfont       : {\n\t\t\ttype   : String as PropType<string>,\n\t\t\tdefault: 'Monaco, Consolas, Courier, monospace'\n\t\t},\n\t\tgraphHeight: {\n\t\t\ttype   : Number as PropType<number>,\n\t\t\tdefault: 60 * window.devicePixelRatio\n\t\t},\n\t\tgraphWidth : {\n\t\t\ttype   : Number as PropType<number>,\n\t\t\tdefault: 90 * window.devicePixelRatio\n\t\t},\n\t\tgraphTop   : {\n\t\t\ttype   : Number as PropType<number>,\n\t\t\tdefault: 0\n\t\t},\n\t\tgraphRight : {\n\t\t\ttype   : Number as PropType<number>,\n\t\t\tdefault: 5 * window.devicePixelRatio\n\t\t},\n\t\twidth      : {\n\t\t\ttype   : Number as PropType<number>,\n\t\t\tdefault: 100 * window.devicePixelRatio\n\t\t}\n\t},\n\tsetup(props) {\n\n\t\tconst map           = inject(mapSymbol)!,\n\t\t\t  isInitialized = inject(isInitializedSymbol)!,\n\t\t\t  control       = new FrameRateControl(\n\t\t\t\t  props.background,\n\t\t\t\t  props.barWidth,\n\t\t\t\t  props.color,\n\t\t\t\t  props.font,\n\t\t\t\t  props.graphHeight,\n\t\t\t\t  props.graphWidth,\n\t\t\t\t  props.graphTop,\n\t\t\t\t  props.graphRight,\n\t\t\t\t  props.width\n\t\t\t  );\n\n\t\tusePositionWatcher(toRef(props, 'position'), map, control);\n\t\tonBeforeUnmount(() => isInitialized.value && map.value?.removeControl(control));\n\n\t},\n\trender() {\n\t\t// nothing\n\t}\n});\n","import { defineComponent, inject, onBeforeUnmount, PropType, toRef } from 'vue';\nimport { Position, PositionProp, PositionValues } from '@/lib/components/controls/position.enum';\nimport { isInitializedSymbol, mapSymbol } from '@/lib/types';\nimport { FitBoundsOptions, GeolocateControl } from 'maplibre-gl';\nimport { usePositionWatcher } from '@/lib/composable/usePositionWatcher';\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglGeolocationControl',\n\tprops: {\n\t\tposition          : {\n\t\t\ttype     : String as PropType<PositionProp>,\n\t\t\tdefault  : Position.TOP_RIGHT,\n\t\t\tvalidator: (v: Position) => {\n\t\t\t\treturn PositionValues.indexOf(v) !== -1;\n\t\t\t}\n\t\t},\n\t\tpositionOptions   : {\n\t\t\ttype   : Object as PropType<PositionOptions>,\n\t\t\tdefault: { enableHighAccuracy: false, timeout: 6000 } as PositionOptions\n\t\t},\n\t\tfitBoundsOptions  : {\n\t\t\ttype   : Object as PropType<FitBoundsOptions>,\n\t\t\tdefault: { maxZoom: 15 } as FitBoundsOptions\n\t\t},\n\t\ttrackUserLocation : {\n\t\t\ttype   : Boolean as PropType<boolean>,\n\t\t\tdefault: false\n\t\t},\n\t\tshowAccuracyCircle: {\n\t\t\ttype   : Boolean as PropType<boolean>,\n\t\t\tdefault: true\n\t\t},\n\t\tshowUserLocation  : {\n\t\t\ttype   : Boolean as PropType<boolean>,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tsetup(props) {\n\n\t\tconst map           = inject(mapSymbol)!,\n\t\t\t  isInitialized = inject(isInitializedSymbol)!,\n\t\t\t  control       = new GeolocateControl({\n\t\t\t\t  positionOptions   : props.positionOptions,\n\t\t\t\t  fitBoundsOptions  : props.fitBoundsOptions,\n\t\t\t\t  trackUserLocation : props.trackUserLocation,\n\t\t\t\t  showAccuracyCircle: props.showAccuracyCircle,\n\t\t\t\t  showUserLocation  : props.showUserLocation\n\t\t\t  });\n\n\t\tusePositionWatcher(toRef(props, 'position'), map, control);\n\t\tonBeforeUnmount(() => isInitialized.value && map.value?.removeControl(control));\n\n\t},\n\trender() {\n\t\t// nothing\n\t}\n});\n","import { defineComponent, inject, onBeforeUnmount, PropType, toRef } from 'vue';\nimport { Position, PositionProp, PositionValues } from '@/lib/components/controls/position.enum';\nimport { isInitializedSymbol, mapSymbol } from '@/lib/types';\nimport { NavigationControl } from 'maplibre-gl';\nimport { usePositionWatcher } from '@/lib/composable/usePositionWatcher';\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglNavigationControl',\n\tprops: {\n\t\tposition      : {\n\t\t\ttype     : String as PropType<PositionProp>,\n\t\t\tdefault  : Position.TOP_RIGHT,\n\t\t\tvalidator: (v: Position) => {\n\t\t\t\treturn PositionValues.indexOf(v) !== -1;\n\t\t\t}\n\t\t},\n\t\tshowCompass   : { type: Boolean as PropType<boolean>, default: true },\n\t\tshowZoom      : { type: Boolean as PropType<boolean>, default: true },\n\t\tvisualizePitch: Boolean as PropType<boolean>\n\t},\n\tsetup(props) {\n\n\t\tconst map           = inject(mapSymbol)!,\n\t\t\t  isInitialized = inject(isInitializedSymbol)!,\n\t\t\t  control       = new NavigationControl({ showCompass: props.showCompass, showZoom: props.showZoom, visualizePitch: props.visualizePitch });\n\n\t\tusePositionWatcher(toRef(props, 'position'), map, control);\n\t\tonBeforeUnmount(() => isInitialized.value && map.value?.removeControl(control));\n\n\t},\n\trender() {\n\t\t// nothing\n\t}\n});\n","import { defineComponent, inject, onBeforeUnmount, PropType, toRef } from 'vue';\nimport { Position, PositionProp, PositionValues } from '@/lib/components/controls/position.enum';\nimport { isInitializedSymbol, mapSymbol } from '@/lib/types';\nimport { ScaleControl } from 'maplibre-gl';\nimport { usePositionWatcher } from '@/lib/composable/usePositionWatcher';\n\nexport enum ScaleControlUnit {\n\tIMPERIAL = 'imperial',\n\tMETRIC   = 'metric',\n\tNAUTICAL = 'nautical'\n}\n\ntype UnitValue = ScaleControlUnit | 'imperial' | 'metric' | 'nautical';\nconst UnitValues = Object.values(ScaleControlUnit);\n\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglScaleControl',\n\tprops: {\n\t\tposition: {\n\t\t\ttype     : String as PropType<PositionProp>,\n\t\t\tvalidator: (v: Position) => {\n\t\t\t\treturn PositionValues.indexOf(v) !== -1;\n\t\t\t}\n\t\t},\n\t\tmaxWidth: { type: Number as PropType<number>, default: 100 },\n\t\tunit    : {\n\t\t\ttype     : String as PropType<UnitValue>,\n\t\t\tdefault  : ScaleControlUnit.METRIC,\n\t\t\tvalidator: (v: ScaleControlUnit) => {\n\t\t\t\treturn UnitValues.indexOf(v) !== -1;\n\t\t\t}\n\t\t}\n\t},\n\tsetup(props) {\n\n\t\tconst map           = inject(mapSymbol)!,\n\t\t\t  isInitialized = inject(isInitializedSymbol)!,\n\t\t\t  control       = new ScaleControl({ maxWidth: props.maxWidth, unit: props.unit });\n\n\t\tusePositionWatcher(toRef(props, 'position'), map, control);\n\t\tonBeforeUnmount(() => isInitialized.value && map.value?.removeControl(control));\n\n\t},\n\trender() {\n\t\t// nothing\n\t}\n});\n","import { defineComponent, h, PropType, ref, SlotsType, warn, watch } from 'vue';\n\nexport enum ButtonType {\n\tDEFAULT     = 'default',\n\tTEXT        = 'text',\n\tMDI         = 'mdi',\n\tSIMPLE_ICON = 'simple-icons',\n}\n\nexport const ButtonTypeValues = Object.values(ButtonType);\n\ninterface Default {\n\tsize: number;\n\tviewbox: string;\n}\n\nconst types: { [key in ButtonType]?: Default } = {\n\t[ ButtonType.TEXT ]       : undefined,\n\t[ ButtonType.MDI ]        : {\n\t\tsize   : 21,\n\t\tviewbox: '0 0 24 24'\n\t},\n\t[ ButtonType.SIMPLE_ICON ]: {\n\t\tsize   : 21,\n\t\tviewbox: '0 0 24 24'\n\t},\n\t[ ButtonType.DEFAULT ]    : {\n\t\tsize   : 0,\n\t\tviewbox: '0 0 0 0'\n\t}\n};\n\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglButton',\n\tprops: {\n\t\ttype   : {\n\t\t\ttype     : String as PropType<ButtonType | 'default' | 'text' | 'mdi' | 'simple-icons'>,\n\t\t\tdefault  : ButtonType.DEFAULT,\n\t\t\tvalidator: (v: ButtonType) => {\n\t\t\t\treturn ButtonTypeValues.indexOf(v) !== -1;\n\t\t\t}\n\t\t},\n\t\tpath   : {\n\t\t\ttype: String as PropType<string>\n\t\t},\n\t\tsize   : Number as PropType<number>,\n\t\tviewbox: String as PropType<string>\n\t},\n\tslots: Object as SlotsType<{ default: {} }>,\n\tsetup(props, { slots }) {\n\n\t\tif (!props.path && props.type !== ButtonType.TEXT) {\n\t\t\twarn('property `path` must be set on MaplibreButton');\n\t\t}\n\n\t\tconst defaults = ref(types[ props.type ] || types.default);\n\t\twatch(() => props.type, v => defaults.value = types[ v ] || types.default);\n\n\t\treturn () => {\n\t\t\tif (props.type === ButtonType.TEXT) {\n\t\t\t\treturn h('button', { type: 'button' }, slots.default?.({}));\n\t\t\t}\n\t\t\treturn h('button', { type: 'button', 'class': 'maplibregl-ctrl-icon' },\n\t\t\t\t[\n\t\t\t\t\th(\n\t\t\t\t\t\t'svg',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twidth  : props.size || defaults.value!.size,\n\t\t\t\t\t\t\theight : props.size || defaults.value!.size,\n\t\t\t\t\t\t\tviewBox: props.viewbox || defaults.value!.viewbox\n\t\t\t\t\t\t},\n\t\t\t\t\t\th('path', { fill: 'currentColor', d: props.path })\n\t\t\t\t\t),\n\t\t\t\t\tslots.default?.({})\n\t\t\t\t]\n\t\t\t);\n\t\t};\n\n\t}\n});\n","import {\n\tcreateCommentVNode,\n\tcreateTextVNode,\n\tdefineComponent,\n\th,\n\tinject,\n\tonBeforeUnmount,\n\tPropType,\n\tRef,\n\tref,\n\tshallowRef,\n\tSlotsType,\n\tTeleport,\n\ttoRef,\n\twatch\n} from 'vue';\nimport { Position, PositionProp, PositionValues } from '@/lib/components/controls/position.enum';\nimport { emitterSymbol, isInitializedSymbol, isLoadedSymbol, mapSymbol, StyleSwitchItem } from '@/lib/types';\nimport { CustomControl } from '@/lib/components/controls/custom.control';\nimport { usePositionWatcher } from '@/lib/composable/usePositionWatcher';\nimport { MglButton } from '@/lib/components';\nimport { ButtonType } from '@/lib/components/button.component';\n\nfunction isEvent(e: any): e is Event {\n\treturn e && !!(e as Event).stopPropagation;\n}\n\ninterface SlotProps {\n\tisOpen: Ref<boolean>,\n\ttoggleOpen: (forceIsOpen?: boolean | Event, e?: Event) => void,\n\tsetStyle: (s: StyleSwitchItem) => void,\n\tmapStyles: StyleSwitchItem[],\n\tcurrentStyle: Ref<StyleSwitchItem | null>,\n}\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglStyleSwitchControl',\n\tprops: {\n\t\tposition  : {\n\t\t\ttype     : String as PropType<PositionProp>,\n\t\t\tvalidator: (v: Position) => {\n\t\t\t\treturn PositionValues.indexOf(v) !== -1;\n\t\t\t}\n\t\t},\n\t\tmapStyles : {\n\t\t\ttype    : Array as PropType<StyleSwitchItem[]>,\n\t\t\trequired: true,\n\t\t\tdefault : []\n\t\t},\n\t\tmodelValue: {\n\t\t\ttype: Object as PropType<StyleSwitchItem>\n\t\t},\n\t\tisOpen    : {\n\t\t\ttype   : Boolean as PropType<boolean>,\n\t\t\tdefault: undefined\n\t\t}\n\t},\n\tslots: Object as SlotsType<{ default: SlotProps, button: SlotProps, styleList: SlotProps }>,\n\temits: [ 'update:modelValue', 'update:isOpen' ],\n\tsetup(props, { emit, slots }) {\n\n\t\tconst map           = inject(mapSymbol)!,\n\t\t\t  isInitialized = inject(isInitializedSymbol)!,\n\t\t\t  isMapLoaded   = inject(isLoadedSymbol)!,\n\t\t\t  emitter       = inject(emitterSymbol)!,\n\t\t\t  isAdded       = ref(false),\n\t\t\t  isOpen        = ref(props.isOpen === undefined ? false : props.isOpen),\n\t\t\t  modelValue    = shallowRef(props.modelValue === undefined ? (props.mapStyles.length ? props.mapStyles[ 0 ] : null) : props.modelValue),\n\t\t\t  control       = new CustomControl(isAdded, false),\n\t\t\t  closer        = toggleOpen.bind(null, false);\n\n\t\tfunction setStyleByMap() {\n\t\t\tconst name = map.value!.getStyle().name;\n\t\t\tfor (let i = 0, len = props.mapStyles.length; i < len; i++) {\n\t\t\t\tif (props.mapStyles[ i ].name === name) {\n\t\t\t\t\tsetStyle(props.mapStyles[ i ]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\twatch(isMapLoaded, (v) => {\n\t\t\tif (v) setStyleByMap();\n\t\t}, { immediate: true });\n\t\tmap.value!.on('style.load', setStyleByMap);\n\t\tdocument.addEventListener('click', closer);\n\n\n\t\tusePositionWatcher(toRef(props, 'position'), map, control);\n\n\t\tif (props.modelValue !== undefined) {\n\t\t\twatch(toRef(props, 'modelValue'), v => {\n\t\t\t\tif (v !== undefined) modelValue.value = v;\n\t\t\t});\n\t\t}\n\t\tif (props.isOpen !== undefined) {\n\t\t\twatch(toRef(props, 'isOpen'), v => {\n\t\t\t\tif (v !== undefined) isOpen.value = v;\n\t\t\t});\n\t\t}\n\n\t\tonBeforeUnmount(() => {\n\t\t\tif (isInitialized.value) {\n\t\t\t\tmap.value!.removeControl(control);\n\t\t\t\tmap.value!.off('style.load', setStyleByMap);\n\t\t\t}\n\t\t\tdocument.removeEventListener('click', closer);\n\t\t});\n\n\t\tfunction setStyle(s: StyleSwitchItem) {\n\t\t\tif (modelValue.value?.name === s.name) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\temitter.emit('styleSwitched', s);\n\n\t\t\t/*\n\t\t\t * Skip diff as long as Maplibre-GL doesn't fie `style.load` correctly\n\t\t\t * @see https://github.com/maplibre/maplibre-gl-js/issues/2587\n\t\t\t*/\n\t\t\tmap.value!.setStyle(s.style, {diff: false});\n\t\t\tif (props.modelValue === undefined) {\n\t\t\t\tmodelValue.value = s;\n\t\t\t}\n\t\t\temit('update:modelValue', s);\n\n\t\t\ttoggleOpen(false);\n\t\t}\n\n\t\tfunction toggleOpen(forceIsOpen?: boolean | Event, e?: Event) {\n\t\t\tif (isEvent(e)) {\n\t\t\t\te.stopPropagation();\n\t\t\t} else if (isEvent(forceIsOpen)) {\n\t\t\t\tforceIsOpen.stopPropagation();\n\t\t\t}\n\t\t\tif (props.isOpen !== undefined && props.isOpen === forceIsOpen || isOpen.value === forceIsOpen) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (props.isOpen === undefined) {\n\t\t\t\tisOpen.value = typeof forceIsOpen === 'boolean' ? forceIsOpen : !isOpen.value;\n\t\t\t\temit('update:isOpen', isOpen.value);\n\t\t\t} else {\n\t\t\t\temit('update:isOpen', typeof forceIsOpen === 'boolean' ? forceIsOpen : !props.isOpen);\n\t\t\t}\n\t\t}\n\n\t\treturn () => {\n\t\t\tif (!isAdded.value) {\n\t\t\t\treturn createCommentVNode('style-switch-control');\n\t\t\t}\n\n\t\t\tconst slotProps: SlotProps = {\n\t\t\t\tisOpen, toggleOpen, setStyle,\n\t\t\t\tmapStyles   : props.mapStyles,\n\t\t\t\tcurrentStyle: modelValue,\n\t\t\t};\n\n\t\t\treturn h(\n\t\t\t\tTeleport as any,\n\t\t\t\t{ to: control.container },\n\t\t\t\tslots.default\n\t\t\t\t\t? slots.default(slotProps)\n\t\t\t\t\t: [\n\t\t\t\t\t\tslots.button\n\t\t\t\t\t\t\t? slots.button(slotProps)\n\t\t\t\t\t\t\t: h(MglButton, {\n\t\t\t\t\t\t\t\ttype   : ButtonType.MDI,\n\t\t\t\t\t\t\t\tpath   : 'M12,18.54L19.37,12.8L21,14.07L12,21.07L3,14.07L4.62,12.81L12,18.54M12,16L3,9L12,2L21,9L12,16M12,4.53L6.26,9L12,13.47L17.74,9L12,4.53Z',\n\t\t\t\t\t\t\t\t'class': [ 'maplibregl-ctrl-icon maplibregl-style-switch', isOpen.value ? 'is-open' : '' ],\n\t\t\t\t\t\t\t\tonClick: toggleOpen.bind(null, true)\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\tslots.styleList\n\t\t\t\t\t\t\t? slots.styleList(slotProps)\n\t\t\t\t\t\t\t: h(\n\t\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t\t{ 'class': [ 'maplibregl-style-list', isOpen.value ? 'is-open' : '' ] },\n\t\t\t\t\t\t\t\tprops.mapStyles.map((s) => {\n\t\t\t\t\t\t\t\t\treturn s.icon\n\t\t\t\t\t\t\t\t\t\t? h(MglButton, {\n\t\t\t\t\t\t\t\t\t\t\ttype   : ButtonType.MDI,\n\t\t\t\t\t\t\t\t\t\t\tpath   : s.icon.path,\n\t\t\t\t\t\t\t\t\t\t\t'class': modelValue.value?.name === s.name ? 'is-active' : '',\n\t\t\t\t\t\t\t\t\t\t\tonClick: () => setStyle(s)\n\t\t\t\t\t\t\t\t\t\t}, createTextVNode(s.label))\n\t\t\t\t\t\t\t\t\t\t: h('button', {\n\t\t\t\t\t\t\t\t\t\t\ttype   : 'button',\n\t\t\t\t\t\t\t\t\t\t\t'class': modelValue.value?.name === s.name ? 'is-active' : '',\n\t\t\t\t\t\t\t\t\t\t\tonClick: () => setStyle(s)\n\t\t\t\t\t\t\t\t\t\t}, createTextVNode(s.label));\n\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t)\n\t\t\t\t\t]\n\t\t\t);\n\t\t};\n\n\t},\n\t// just only for code assist\n\ttemplate: `\n\t\t<slot>\n\t\t<slot name=\"button\"></slot>\n\t\t<slot name=\"styleList\"></slot>\n\t\t</slot>\n\t`\n});\n\n","import { defineComponent, inject, provide, onBeforeUnmount, PropType, unref, watch, shallowRef, h } from 'vue';\nimport { LngLatLike, Marker, MarkerOptions, PointLike, PositionAnchor } from 'maplibre-gl';\nimport { MapLib } from '@/lib/lib/map.lib';\nimport { mapSymbol, markerSymbol } from '@/lib/types';\n\nexport default /*#__PURE__*/ defineComponent({\n  name : 'MglMarker',\n  props: {\n    coordinates: {\n      type    : [ Object, Array ] as unknown as PropType<LngLatLike>,\n      required: true\n    },\n    offset     : [ Object, Array ] as PropType<PointLike>,\n    anchor     : String as PropType<PositionAnchor>,\n    color      : String as PropType<string>,\n    // draggable        : Boolean as PropType<boolean>, todo implement feature\n    clickTolerance   : Number as PropType<number>,\n    rotation         : Number as PropType<number>,\n    rotationAlignment: String as PropType<'map' | 'viewport' | 'auto'>,\n    pitchAlignment   : String as PropType<'map' | 'viewport' | 'auto'>,\n    scale            : Number as PropType<number>\n  },\n  setup(props, { slots }) {\n\n    const map                 = inject(mapSymbol)!,\n    opts: MarkerOptions = Object.keys(props)\n      .filter(opt => (props as any)[ opt ] !== undefined && MapLib.MARKER_OPTION_KEYS.indexOf(opt as keyof MarkerOptions) !== -1)\n      .reduce((obj, opt) => {\n\t(obj as any)[ opt ] = unref((props as any)[ opt ]);\n\treturn obj;\n      }, {});\n\n    const marker = new Marker(opts);\n    marker.setLngLat(props.coordinates).addTo(map.value!);\n    provide(markerSymbol, shallowRef(marker));\n\n    watch(() => props.coordinates, v => marker.setLngLat(v));\n    // watch(() => props.draggable, v => marker.setDraggable(v || false));\n    watch(() => props.offset, v => marker.setOffset(v || [ 0, 0 ]));\n    watch(() => props.pitchAlignment, v => marker.setPitchAlignment(v || 'auto'));\n    watch(() => props.rotationAlignment, v => marker.setRotationAlignment(v || 'auto'));\n\n    onBeforeUnmount(marker.remove.bind(marker));\n\n    return () => [\n      h('div', slots.default ? slots.default({}) : undefined)\n    ];\n  }\n});\n","import { defineComponent, inject, onMounted, onBeforeUnmount, PropType, unref, watch, ref, h } from 'vue';\nimport { LngLatLike, Popup, Offset, PositionAnchor, PopupOptions, PointLike } from 'maplibre-gl';\nimport { MapLib } from '@/lib/lib/map.lib';\nimport { mapSymbol, markerSymbol } from '@/lib/types';\n\nexport default /*#__PURE__*/ defineComponent({\n  name : 'MglPopup',\n  emits: ['open', 'close'],\n  props: {\n    coordinates: {\n      type: [ Object, Array ] as unknown as PropType<LngLatLike>,\n      required: false\n    },\n    closeButton: {\n      type: Boolean,\n      required: false,\n      default: true,\n    },\n    closeOnClick: {\n      type: Boolean,\n      required: false,\n      default: true,\n    },\n    closeOnMove: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n    focusAfterOpen: {\n      type: Boolean,\n      required: false,\n      default: true,\n    },\n    anchor: {\n      type: String as PropType<PositionAnchor>,\n      required: false\n    },\n    offset: {\n      type: [Number, Object, Array] as PropType<Offset>,\n      required: false,\n    },\n    className: {\n      type: String,\n      required: false,\n    },\n    maxWidth: {\n      type: String,\n      default: '240px',\n    },\n    text: {\n      type: String,\n      required: false\n    }\n  },\n  setup(props, { slots, emit }) {\n    const map = inject(mapSymbol);\n    const marker = inject(markerSymbol);\n    const root = ref();\n\n    const opts: PopupOptions = Object.keys(props)\n      .filter(opt => (props as any)[ opt ] !== undefined && MapLib.POPUP_OPTION_KEYS.indexOf(opt as keyof PopupOptions) !== -1)\n      .reduce((obj, opt) => {\n\t(obj as any)[ opt ] = unref((props as any)[ opt ]);\n\treturn obj;\n      }, {});\n\n    const popup = new Popup(opts);\n\n    if (marker && marker.value) {\n      marker.value.setPopup(popup);\n    } else if (props.coordinates && map) {\n      popup.setLngLat(props.coordinates).addTo(map.value!);\n    }\n\n    if (props.text) {\n      popup.setText(props.text);\n    }\n\n    popup.on('open', () => emit('open'));\n    popup.on('close', () => emit('close'));\n\n    watch(() => props.coordinates, (v) => { if (v) { popup.setLngLat(v) } });\n    watch(() => props.text, v => popup.setText(v || ''));\n    watch(() => props.offset, v => popup.setOffset(v));\n    watch(() => props.maxWidth, v => popup.setMaxWidth(v));\n\n    onMounted(() => {\n      if (root.value && !props.text) {\n        popup.setDOMContent(root.value!);\n      }\n    });\n\n    return () => [\n      h('div', {ref: root}, slots.default ? slots.default() : undefined)\n    ];\n  },\n});\n","export type SourceLayerRegistryHandler = () => void\n\nexport class SourceLayerRegistry {\n\n\tprivate unmountHandlers = new Map<string, SourceLayerRegistryHandler>();\n\n\tregisterUnmountHandler(id: string, handler: SourceLayerRegistryHandler) {\n\t\tthis.unmountHandlers.set(id, handler);\n\t}\n\n\tunregisterUnmountHandler(id: string) {\n\t\tthis.unmountHandlers.delete(id);\n\t}\n\n\tunmount() {\n\t\tthis.unmountHandlers.forEach((h) => h());\n\t}\n\n}\n","import { ref, Ref, unref } from 'vue';\nimport { Source } from 'maplibre-gl';\n\nexport class SourceLib {\n\n\tprivate static readonly REFS = new Map<string, Ref<Source | undefined | null>>();\n\n\tstatic genSourceOpts<T extends object, O extends object>(type: string, props: object, sourceOpts: Array<keyof O>): T {\n\n\t\treturn Object.keys(props)\n\t\t\t\t\t .filter(opt => (props as any)[ opt ] !== undefined && sourceOpts.indexOf(opt as any) !== -1)\n\t\t\t\t\t .reduce((obj, opt) => {\n\t\t\t\t\t\t (obj as any)[ opt ] = unref((props as any)[ opt ]);\n\t\t\t\t\t\t return obj;\n\t\t\t\t\t }, { type } as T);\n\n\t}\n\n\tstatic getSourceRef<T extends Source>(mcid: number, source: any): Ref<T | undefined | null> {\n\n\t\tconst isString = typeof source === 'string',\n\t\t\t  key      = String(mcid) + (isString ? source : '');\n\t\tlet r          = SourceLib.REFS.get(key);\n\t\tif (!r) {\n\t\t\tr = ref(isString ? null : undefined);\n\t\t\tSourceLib.REFS.set(key, r);\n\t\t}\n\t\treturn r as Ref<T | undefined | null>;\n\n\t}\n\n}","import { inject, onBeforeUnmount, Ref, watch } from 'vue';\nimport { Source, SourceSpecification } from 'maplibre-gl';\nimport { emitterSymbol, isLoadedSymbol, mapSymbol } from '@/lib/types';\nimport { SourceLayerRegistry } from '@/lib/lib/sourceLayer.registry';\nimport { SourceLib } from '@/lib/lib/source.lib';\n\nexport function useSource<O extends object>(\n\tsource: Ref<Source | undefined | null>,\n\tprops: any,\n\ttype: string,\n\tsourceOpts: Array<keyof O>,\n\tregistry: SourceLayerRegistry\n) {\n\n\tconst map      = inject(mapSymbol)!,\n\t\t  isLoaded = inject(isLoadedSymbol)!,\n\t\t  emitter  = inject(emitterSymbol)!;\n\n\tfunction addSource() {\n\t\tif (isLoaded.value) {\n\t\t\tmap.value!.addSource(props.sourceId, SourceLib.genSourceOpts<object, O>(type, props, sourceOpts) as SourceSpecification);\n\t\t\tsource.value = map.value!.getSource(props.sourceId);\n\t\t}\n\t}\n\n\tfunction resetSource() {\n\t\tsource.value = null;\n\t}\n\n\twatch(isLoaded, addSource, { immediate: true });\n\tmap.value!.on('style.load', addSource);\n\temitter.on('styleSwitched', resetSource);\n\n\treturn onBeforeUnmount(() => {\n\t\tif (isLoaded.value) {\n\t\t\tregistry.unmount();\n\t\t\tmap.value!.removeSource(props.sourceId);\n\t\t}\n\t\tmap.value!.off('style.load', addSource);\n\t\temitter.off('styleSwitched', resetSource);\n\t});\n\n}\n","import { createCommentVNode, defineComponent, inject, PropType, provide, toRef, watch } from 'vue';\nimport { AllSourceOptions, componentIdSymbol, sourceIdSymbol, sourceLayerRegistry } from '@/lib/types';\nimport { CanvasSource, CanvasSourceSpecification, Coordinates } from 'maplibre-gl';\nimport { SourceLayerRegistry } from '@/lib/lib/sourceLayer.registry';\nimport { SourceLib } from '@/lib/lib/source.lib';\nimport { useSource } from '@/lib/composable/useSource';\nimport { SlotsType } from 'vue/dist/vue';\n\nconst sourceOpts = AllSourceOptions<CanvasSourceSpecification>({\n\tanimate    : undefined,\n\tcanvas     : undefined,\n\tcoordinates: undefined,\n});\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglCanvasSource',\n\tprops: {\n\t\tsourceId   : {\n\t\t\ttype    : String as PropType<string>,\n\t\t\trequired: true\n\t\t},\n\t\tcoordinates: Array as unknown as PropType<Coordinates>,\n\t\tanimate    : Boolean as PropType<boolean>,\n\t\tcanvas     : [ Object, String ] as PropType<HTMLCanvasElement | string>\n\t},\n\tslots: Object as SlotsType<{ default: {} }>,\n\tsetup(props, { slots }) {\n\n\t\tconst cid      = inject(componentIdSymbol)!,\n\t\t\t  source   = SourceLib.getSourceRef<CanvasSource>(cid, props.sourceId),\n\t\t\t  registry = new SourceLayerRegistry();\n\n\t\tprovide(sourceIdSymbol, props.sourceId);\n\t\tprovide(sourceLayerRegistry, registry);\n\n\t\tuseSource<CanvasSourceSpecification>(source, props, 'canvas', sourceOpts, registry);\n\n\t\twatch(toRef(props, 'coordinates'), v => {\n\t\t\tif (v) {\n\t\t\t\tsource.value?.setCoordinates(v);\n\t\t\t}\n\t\t});\n\n\t\treturn () => [\n\t\t\tcreateCommentVNode('Canvas Source'),\n\t\t\tsource.value && slots.default ? slots.default({}) : undefined\n\t\t];\n\n\t}\n});\n","import { createCommentVNode, defineComponent, inject, PropType, provide, SlotsType, toRef, watch } from 'vue';\nimport { AllSourceOptions, componentIdSymbol, sourceIdSymbol, sourceLayerRegistry } from '@/lib/types';\nimport { GeoJSONSource, GeoJSONSourceOptions, GeoJSONSourceSpecification, PromoteIdSpecification } from 'maplibre-gl';\nimport { SourceLayerRegistry } from '@/lib/lib/sourceLayer.registry';\nimport type GeoJSON from 'geojson';\nimport { SourceLib } from '@/lib/lib/source.lib';\nimport { useSource } from '@/lib/composable/useSource';\n\nconst sourceOpts = AllSourceOptions<GeoJSONSourceSpecification>({\n\tdata             : undefined,\n\tmaxzoom          : undefined,\n\tattribution      : undefined,\n\tbuffer           : undefined,\n\ttolerance        : undefined,\n\tcluster          : undefined,\n\tclusterRadius    : undefined,\n\tclusterMaxZoom   : undefined,\n\tclusterMinPoints : undefined,\n\tclusterProperties: undefined,\n\tlineMetrics      : undefined,\n\tgenerateId       : undefined,\n\tpromoteId        : undefined,\n\tfilter           : undefined,\n});\n\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglGeoJsonSource',\n\tprops: {\n\t\tsourceId         : {\n\t\t\ttype    : String as PropType<string>,\n\t\t\trequired: true\n\t\t},\n\t\tdata             : [ Object, String ] as PropType<GeoJSON.Feature<GeoJSON.Geometry> | GeoJSON.FeatureCollection<GeoJSON.Geometry> | string>,\n\t\tmaxzoom          : Number as PropType<number>,\n\t\tattribution      : String as PropType<string>,\n\t\tbuffer           : Number as PropType<number>,\n\t\ttolerance        : Number as PropType<number>,\n\t\tcluster          : [ Number, Boolean ] as PropType<number | boolean>,\n\t\tclusterRadius    : Number as PropType<number>,\n\t\tclusterMaxZoom   : Number as PropType<number>,\n\t\tclusterMinPoints : Number as PropType<number>,\n\t\tclusterProperties: Object as PropType<object>,\n\t\tlineMetrics      : Boolean as PropType<boolean>,\n\t\tgenerateId       : Boolean as PropType<boolean>,\n\t\tpromoteId        : [ Object, String ] as PropType<PromoteIdSpecification>,\n\t\tfilter           : [ Array, String, Object ] as PropType<any>\n\t},\n\tslots: Object as SlotsType<{ default: {} }>,\n\tsetup(props, { slots }) {\n\n\t\tconst cid      = inject(componentIdSymbol)!,\n\t\t\t  source   = SourceLib.getSourceRef<GeoJSONSource>(cid, props.sourceId),\n\t\t\t  registry = new SourceLayerRegistry();\n\n\t\tprovide(sourceIdSymbol, props.sourceId);\n\t\tprovide(sourceLayerRegistry, registry);\n\n\t\tuseSource<GeoJSONSourceOptions>(source, props, 'geojson', sourceOpts, registry);\n\n\t\twatch(toRef(props, 'data'), v => source.value?.setData(v || { type: 'FeatureCollection', features: [] }));\n\n\t\treturn () => [\n\t\t\tcreateCommentVNode('GeoJSON Source'),\n\t\t\tsource.value && slots.default ? slots.default({}) : undefined\n\t\t];\n\n\t}\n});\n","import { createCommentVNode, defineComponent, inject, PropType, provide, toRef, watch } from 'vue';\nimport { AllSourceOptions, componentIdSymbol, sourceIdSymbol, sourceLayerRegistry } from '@/lib/types';\nimport { Coordinates, ImageSource, ImageSourceSpecification } from 'maplibre-gl';\nimport { SourceLayerRegistry } from '@/lib/lib/sourceLayer.registry';\nimport { SourceLib } from '@/lib/lib/source.lib';\nimport { useSource } from '@/lib/composable/useSource';\nimport { SlotsType } from 'vue/dist/vue';\n\nconst sourceOpts = AllSourceOptions<ImageSourceSpecification>({\n\turl        : undefined,\n\tcoordinates: undefined,\n});\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglImageSource',\n\tprops: {\n\t\tsourceId   : {\n\t\t\ttype    : String as PropType<string>,\n\t\t\trequired: true\n\t\t},\n\t\turl        : String as PropType<string>,\n\t\tcoordinates: Array as unknown as PropType<Coordinates>\n\t},\n\tslots: Object as SlotsType<{ default: {} }>,\n\tsetup(props, { slots }) {\n\n\t\tconst cid      = inject(componentIdSymbol)!,\n\t\t\t  source   = SourceLib.getSourceRef<ImageSource>(cid, props.sourceId),\n\t\t\t  registry = new SourceLayerRegistry();\n\n\t\tprovide(sourceIdSymbol, props.sourceId);\n\t\tprovide(sourceLayerRegistry, registry);\n\n\t\tuseSource<ImageSourceSpecification>(source, props, 'image', sourceOpts, registry);\n\n\t\twatch(toRef(props, 'coordinates'), v => {\n\t\t\tif (v) {\n\t\t\t\tsource.value?.setCoordinates(v);\n\t\t\t}\n\t\t});\n\n\t\treturn () => [\n\t\t\tcreateCommentVNode('Image Source'),\n\t\t\tsource.value && slots.default ? slots.default({}) : undefined\n\t\t];\n\n\t}\n});\n","import { createCommentVNode, defineComponent, inject, PropType, provide, SlotsType } from 'vue';\nimport { AllSourceOptions, componentIdSymbol, sourceIdSymbol, sourceLayerRegistry } from '@/lib/types';\nimport { RasterSourceSpecification, RasterTileSource } from 'maplibre-gl';\nimport { SourceLayerRegistry } from '@/lib/lib/sourceLayer.registry';\nimport { SourceLib } from '@/lib/lib/source.lib';\nimport { useSource } from '@/lib/composable/useSource';\n\nconst sourceOpts = AllSourceOptions<RasterSourceSpecification>({\n\turl        : undefined,\n\ttiles      : undefined,\n\tbounds     : undefined,\n\tminzoom    : undefined,\n\tmaxzoom    : undefined,\n\ttileSize   : undefined,\n\tscheme     : undefined,\n\tattribution: undefined,\n\tvolatile   : undefined\n});\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglRasterSource',\n\tprops: {\n\t\tsourceId   : {\n\t\t\ttype    : String as PropType<string>,\n\t\t\trequired: true\n\t\t},\n\t\turl        : String as PropType<string>,\n\t\ttiles      : Array as PropType<string[]>,\n\t\tbounds     : Array as PropType<number[]>,\n\t\tminzoom    : Number as PropType<number>,\n\t\tmaxzoom    : Number as PropType<number>,\n\t\ttileSize   : Number as PropType<number>,\n\t\tscheme     : String as PropType<'xyz' | 'tms'>,\n\t\tattribution: String as PropType<string>,\n\t\tvolatile   : Boolean\n\t},\n\tslots: Object as SlotsType<{ default: {} }>,\n\tsetup(props, { slots }) {\n\n\t\tconst cid      = inject(componentIdSymbol)!,\n\t\t\t  source   = SourceLib.getSourceRef<RasterTileSource>(cid, props.sourceId),\n\t\t\t  registry = new SourceLayerRegistry();\n\n\t\tprovide(sourceIdSymbol, props.sourceId);\n\t\tprovide(sourceLayerRegistry, registry);\n\n\t\tuseSource<RasterSourceSpecification>(source, props, 'raster', sourceOpts, registry);\n\n\t\treturn () => [\n\t\t\tcreateCommentVNode('Raster Source'),\n\t\t\tsource.value && slots.default ? slots.default({}) : undefined\n\t\t];\n\n\t}\n});\n","import { createCommentVNode, defineComponent, inject, PropType, provide } from 'vue';\nimport { AllSourceOptions, componentIdSymbol, sourceIdSymbol, sourceLayerRegistry } from '@/lib/types';\nimport { RasterDEMSourceSpecification, RasterDEMTileSource } from 'maplibre-gl';\nimport { SourceLayerRegistry } from '@/lib/lib/sourceLayer.registry';\nimport { SourceLib } from '@/lib/lib/source.lib';\nimport { useSource } from '@/lib/composable/useSource';\nimport { SlotsType } from 'vue/dist/vue';\n\nconst sourceOpts = AllSourceOptions<RasterDEMSourceSpecification>({\n\turl        : undefined,\n\ttiles      : undefined,\n\tbounds     : undefined,\n\tminzoom    : undefined,\n\tmaxzoom    : undefined,\n\ttileSize   : undefined,\n\tattribution: undefined,\n\tencoding   : undefined,\n\tvolatile   : undefined\n});\n\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglRasterDemSource',\n\tprops: {\n\t\tsourceId   : {\n\t\t\ttype    : String as PropType<string>,\n\t\t\trequired: true\n\t\t},\n\t\turl        : String as PropType<string>,\n\t\ttiles      : Array as PropType<string[]>,\n\t\tbounds     : Array as PropType<number[]>,\n\t\tminzoom    : Number as PropType<number>,\n\t\tmaxzoom    : Number as PropType<number>,\n\t\ttileSize   : Number as PropType<number>,\n\t\tattribution: String as PropType<string>,\n\t\tencoding   : String as PropType<'terrarium' | 'mapbox'>,\n\t\tvolatile   : Boolean\n\t},\n\tslots: Object as SlotsType<{ default: {} }>,\n\tsetup(props, { slots }) {\n\n\t\tconst cid      = inject(componentIdSymbol)!,\n\t\t\t  source   = SourceLib.getSourceRef<RasterDEMTileSource>(cid, props.sourceId),\n\t\t\t  registry = new SourceLayerRegistry();\n\n\t\tprovide(sourceIdSymbol, props.sourceId);\n\t\tprovide(sourceLayerRegistry, registry);\n\n\t\tuseSource<RasterDEMSourceSpecification>(source, props, 'raster-dem', sourceOpts, registry);\n\n\t\treturn () => [\n\t\t\tcreateCommentVNode('RasterDem Source'),\n\t\t\tsource.value && slots.default ? slots.default({}) : undefined\n\t\t];\n\n\t}\n});\n","import { createCommentVNode, defineComponent, inject, PropType, provide, toRef, watch } from 'vue';\nimport { AllSourceOptions, componentIdSymbol, sourceIdSymbol, sourceLayerRegistry } from '@/lib/types';\nimport { PromoteIdSpecification, VectorSourceSpecification, VectorTileSource } from 'maplibre-gl';\nimport { SourceLayerRegistry } from '@/lib/lib/sourceLayer.registry';\nimport { SourceLib } from '@/lib/lib/source.lib';\nimport { useSource } from '@/lib/composable/useSource';\nimport { SlotsType } from 'vue/dist/vue';\n\nconst sourceOpts = AllSourceOptions<VectorSourceSpecification>({\n\turl        : undefined,\n\ttiles      : undefined,\n\tbounds     : undefined,\n\tscheme     : undefined,\n\tminzoom    : undefined,\n\tmaxzoom    : undefined,\n\tattribution: undefined,\n\tpromoteId  : undefined,\n\tvolatile   : undefined\n});\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglVectorSource',\n\tprops: {\n\t\tsourceId   : {\n\t\t\ttype    : String as PropType<string>,\n\t\t\trequired: true\n\t\t},\n\t\turl        : String as PropType<string>,\n\t\ttiles      : Array as PropType<string[]>,\n\t\tbounds     : Array as PropType<number[]>,\n\t\tscheme     : String as PropType<'xyz' | 'tms'>,\n\t\tminzoom    : Number as PropType<number>,\n\t\tmaxzoom    : Number as PropType<number>,\n\t\tattribution: String as PropType<string>,\n\t\tpromoteId  : [ Object, String ] as PropType<PromoteIdSpecification>,\n\t\tvolatile   : Boolean\n\t},\n\tslots: Object as SlotsType<{ default: {} }>,\n\tsetup(props, { slots }) {\n\n\t\tconst cid      = inject(componentIdSymbol)!,\n\t\t\t  source   = SourceLib.getSourceRef<VectorTileSource>(cid, props.sourceId),\n\t\t\t  registry = new SourceLayerRegistry();\n\n\t\tprovide(sourceIdSymbol, props.sourceId);\n\t\tprovide(sourceLayerRegistry, registry);\n\n\t\tuseSource<VectorSourceSpecification>(source, props, 'vector', sourceOpts, registry);\n\n\t\twatch(toRef(props, 'tiles'), v => source.value?.setTiles(v || []));\n\t\twatch(toRef(props, 'url'), v => source.value?.setUrl(v || ''));\n\n\t\treturn () => [\n\t\t\tcreateCommentVNode('Vector Source'),\n\t\t\tsource.value && slots.default ? slots.default({}) : undefined\n\t\t];\n\n\t}\n});\n","import { createCommentVNode, defineComponent, inject, PropType, provide, toRef, watch } from 'vue';\nimport { AllSourceOptions, componentIdSymbol, sourceIdSymbol, sourceLayerRegistry } from '@/lib/types';\nimport { Coordinates, VideoSource, VideoSourceSpecification } from 'maplibre-gl';\nimport { SourceLayerRegistry } from '@/lib/lib/sourceLayer.registry';\nimport { SourceLib } from '@/lib/lib/source.lib';\nimport { useSource } from '@/lib/composable/useSource';\nimport { SlotsType } from 'vue/dist/vue';\n\nconst sourceOpts = AllSourceOptions<VideoSourceSpecification>({\n\turls       : undefined,\n\tcoordinates: undefined\n});\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglVideoSource',\n\tprops: {\n\t\tsourceId   : {\n\t\t\ttype    : String as PropType<string>,\n\t\t\trequired: true\n\t\t},\n\t\turls       : Array as PropType<string[]>,\n\t\tcoordinates: Array as unknown as PropType<Coordinates>\n\t},\n\tslots: Object as SlotsType<{ default: {} }>,\n\tsetup(props, { slots }) {\n\n\t\tconst cid      = inject(componentIdSymbol)!,\n\t\t\t  source   = SourceLib.getSourceRef<VideoSource>(cid, props.sourceId),\n\t\t\t  registry = new SourceLayerRegistry();\n\n\t\tprovide(sourceIdSymbol, props.sourceId);\n\t\tprovide(sourceLayerRegistry, registry);\n\n\t\tuseSource<VideoSourceSpecification>(source, props, 'video', sourceOpts, registry);\n\n\t\twatch(toRef(props, 'coordinates'), v => {\n\t\t\tif (v) {\n\t\t\t\tsource.value?.setCoordinates(v);\n\t\t\t}\n\t\t});\n\n\t\treturn () => [\n\t\t\tcreateCommentVNode('Video Source'),\n\t\t\tsource.value && slots.default ? slots.default({}) : undefined\n\t\t];\n\n\t}\n});\n","import {\n\tBackgroundLayerSpecification,\n\tCircleLayerSpecification,\n\tFillExtrusionLayerSpecification,\n\tFillLayerSpecification,\n\tHeatmapLayerSpecification,\n\tHillshadeLayerSpecification,\n\tLayerSpecification,\n\tLineLayerSpecification,\n\tMap,\n\tMapLayerEventType,\n\tRasterLayerSpecification,\n\tSource,\n\tSymbolLayerSpecification\n} from 'maplibre-gl';\nimport { PropType, unref, VNode } from 'vue';\n\nexport class LayerLib {\n\n\tstatic readonly SOURCE_OPTS: Array<keyof (Omit<FillLayerSpecification & LineLayerSpecification & SymbolLayerSpecification & CircleLayerSpecification & HeatmapLayerSpecification & FillExtrusionLayerSpecification & RasterLayerSpecification & HillshadeLayerSpecification & BackgroundLayerSpecification, 'source-layer'> & {\n\t\tsourceLayer?: string\n\t})> = [\n\t\t'metadata', 'ref', 'source', 'sourceLayer', 'minzoom', 'maxzoom', 'interactive', 'filter', 'layout', 'paint'\n\t];\n\n\tstatic readonly LAYER_EVENTS: Array<keyof MapLayerEventType> = [\n\t\t'click', 'dblclick', 'mousedown', 'mouseup', 'mousemove', 'mouseenter', 'mouseleave', 'mouseover', 'mouseout', 'contextmenu', 'touchstart', 'touchend',\n\t\t'touchcancel'\n\t];\n\n\tstatic readonly SHARED = {\n\t\tprops: {\n\t\t\tlayerId    : {\n\t\t\t\ttype: String as PropType<string>,\n\t\t\t\trequired: true\n\t\t\t},\n\t\t\tsource     : [ String, Object ] as PropType<string | Source>,\n\t\t\tmetadata   : [ Object, Array, String, Number ] as PropType<any>,\n\t\t\tref        : String as PropType<string>,\n\t\t\tsourceLayer: String as PropType<string>,\n\t\t\tminzoom    : Number as PropType<number>,\n\t\t\tmaxzoom    : Number as PropType<number>,\n\t\t\tinteractive: Boolean as PropType<boolean>,\n\t\t\tfilter     : Array as PropType<any[ ]>,\n\t\t\tbefore     : String as PropType<string>\n\t\t},\n\t\temits: [\n\t\t\t'click', 'dblclick', 'mousedown', 'mouseup', 'mousemove', 'mouseenter', 'mouseleave', 'mouseover', 'mouseout', 'contextmenu', 'touchstart', 'touchend',\n\t\t\t'touchcancel'\n\t\t]\n\t};\n\n\tstatic genLayerOpts<T = LayerSpecification>(id: string, type: string, props: any, source: any): T {\n\n\t\treturn Object.keys(props)\n\t\t\t\t\t .filter(opt => (props as any)[ opt ] !== undefined && LayerLib.SOURCE_OPTS.indexOf(opt as any) !== -1)\n\t\t\t\t\t .reduce((obj, opt) => {\n\t\t\t\t\t\t (obj as any)[ opt === 'sourceLayer' ? 'source-layer' : opt ] = unref((props as any)[ opt ]);\n\t\t\t\t\t\t return obj;\n\t\t\t\t\t }, { type, source: props.source || source, id } as T);\n\n\t}\n\n\tstatic registerLayerEvents(map: Map, layerId: string, vn: VNode) {\n\n\t\tif (!vn.props) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let i = 0, len = LayerLib.LAYER_EVENTS.length; i < len; i++) {\n\t\t\tconst evProp = 'on' + LayerLib.LAYER_EVENTS[ i ].charAt(0).toUpperCase() + LayerLib.LAYER_EVENTS[ i ].substr(1);\n\t\t\tif (vn.props[ evProp ]) {\n\t\t\t\tmap.on(LayerLib.LAYER_EVENTS[ i ], layerId, vn.props[ evProp ]);\n\t\t\t}\n\t\t}\n\n\t}\n\n\tstatic unregisterLayerEvents(map: Map, layerId: string, vn: VNode) {\n\n\t\tif (!vn.props) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let i = 0, len = LayerLib.LAYER_EVENTS.length; i < len; i++) {\n\t\t\tconst evProp = 'on' + LayerLib.LAYER_EVENTS[ i ].charAt(0).toUpperCase() + LayerLib.LAYER_EVENTS[ i ].substr(1);\n\t\t\tif (vn.props[ evProp ]) {\n\t\t\t\tmap.off(LayerLib.LAYER_EVENTS[ i ], layerId, vn.props[ evProp ]);\n\t\t\t}\n\t\t}\n\n\t}\n\n}","import { inject, onBeforeUnmount } from 'vue';\nimport { ComponentInternalInstance } from '@vue/runtime-core';\nimport { LayerLib } from '@/lib/lib/layer.lib';\nimport { isLoadedSymbol, mapSymbol, sourceLayerRegistry } from '@/lib/types';\n\nexport function useDisposableLayer(layerId: string, ci?: ComponentInternalInstance) {\n\n\tconst map      = inject(mapSymbol)!,\n\t\t  isLoaded = inject(isLoadedSymbol)!,\n\t\t  registry = inject(sourceLayerRegistry)!;\n\n\tfunction removeLayer() {\n\t\tif (isLoaded.value) {\n\t\t\tif (ci) {\n\t\t\t\tLayerLib.unregisterLayerEvents(map.value!, layerId, ci.vnode);\n\t\t\t}\n\t\t\tconst layer = map.value!.getLayer(layerId);\n\t\t\tif (layer) {\n\t\t\t\tmap.value!.removeLayer(layerId);\n\t\t\t}\n\t\t}\n\t}\n\n\tregistry.registerUnmountHandler(layerId, removeLayer);\n\tonBeforeUnmount(() => {\n\t\tregistry.unregisterUnmountHandler(layerId);\n\t\tremoveLayer();\n\t});\n\n}","import { BackgroundLayerSpecification } from 'maplibre-gl';\nimport { createCommentVNode, defineComponent, inject, PropType, warn, watch } from 'vue';\nimport { componentIdSymbol, isLoadedSymbol, mapSymbol, sourceIdSymbol } from '@/lib/types';\nimport { LayerLib } from '@/lib/lib/layer.lib';\nimport { SourceLib } from '@/lib/lib/source.lib';\nimport { useDisposableLayer } from '@/lib/composable/useDisposableLayer';\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglBackgroundLayer',\n\tprops: {\n\t\t...LayerLib.SHARED.props,\n\t\tlayout: Object as PropType<BackgroundLayerSpecification['layout']>,\n\t\tpaint : Object as PropType<BackgroundLayerSpecification['paint']>\n\t},\n\temits: [ ...LayerLib.SHARED.emits ],\n\tsetup(props) {\n\n\t\tconst sourceId = inject(sourceIdSymbol);\n\n\t\tif (!sourceId && !props.source) {\n\t\t\twarn('Background Layer: layer must be used inside source tag or source prop must be set');\n\t\t\treturn;\n\t\t}\n\n\t\tconst map       = inject(mapSymbol)!,\n\t\t\t  isLoaded  = inject(isLoadedSymbol)!,\n\t\t\t  cid       = inject(componentIdSymbol)!,\n\t\t\t  sourceRef = SourceLib.getSourceRef(cid, props.source || sourceId);\n\n\t\tuseDisposableLayer(props.layerId!);\n\n\t\twatch([ isLoaded, sourceRef ], ([ il, src ]) => {\n\t\t\tif (il && (src || src === undefined)) {\n\t\t\t\tmap.value!.addLayer(LayerLib.genLayerOpts<BackgroundLayerSpecification>(props.layerId!, 'background', props, sourceId), props.before || undefined);\n\t\t\t}\n\t\t}, { immediate: true });\n\n\t\treturn () => createCommentVNode('Background Layer');\n\n\t}\n});\n","import { CircleLayerSpecification } from 'maplibre-gl';\nimport { createCommentVNode, defineComponent, getCurrentInstance, inject, PropType, warn, watch } from 'vue';\nimport { componentIdSymbol, isLoadedSymbol, mapSymbol, sourceIdSymbol } from '@/lib/types';\nimport { useDisposableLayer } from '@/lib/composable/useDisposableLayer';\nimport { LayerLib } from '@/lib/lib/layer.lib';\nimport { SourceLib } from '@/lib/lib/source.lib';\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglCircleLayer',\n\tprops: {\n\t\t...LayerLib.SHARED.props,\n\t\tlayout: Object as PropType<CircleLayerSpecification['layout']>,\n\t\tpaint : Object as PropType<CircleLayerSpecification['paint']>\n\t},\n\temits: [ ...LayerLib.SHARED.emits ],\n\tsetup(props) {\n\n\t\tconst sourceId = inject(sourceIdSymbol);\n\n\t\tif (!sourceId && !props.source) {\n\t\t\twarn('Circle Layer: layer must be used inside source tag or source prop must be set');\n\t\t\treturn;\n\t\t}\n\n\t\tconst ci        = getCurrentInstance()!,\n\t\t\t  map       = inject(mapSymbol)!,\n\t\t\t  isLoaded  = inject(isLoadedSymbol)!,\n\t\t\t  cid       = inject(componentIdSymbol)!,\n\t\t\t  sourceRef = SourceLib.getSourceRef(cid, props.source || sourceId);\n\n\t\tuseDisposableLayer(props.layerId!, ci);\n\n\t\twatch([ isLoaded, sourceRef ], ([ il, src ]) => {\n\t\t\tif (il && (src || src === undefined)) {\n\t\t\t\tmap.value!.addLayer(LayerLib.genLayerOpts<CircleLayerSpecification>(props.layerId!, 'circle', props, sourceId), props.before || undefined);\n\t\t\t\tLayerLib.registerLayerEvents(map.value!, props.layerId!, ci.vnode);\n\t\t\t}\n\t\t}, { immediate: true });\n\n\t\treturn () => createCommentVNode('Circle Layer');\n\n\t}\n});\n","import { FillLayerSpecification } from 'maplibre-gl';\nimport { createCommentVNode, defineComponent, getCurrentInstance, inject, PropType, warn, watch } from 'vue';\nimport { componentIdSymbol, isLoadedSymbol, mapSymbol, sourceIdSymbol } from '@/lib/types';\nimport { LayerLib } from '@/lib/lib/layer.lib';\nimport { SourceLib } from '@/lib/lib/source.lib';\nimport { useDisposableLayer } from '@/lib/composable/useDisposableLayer';\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglFillLayer',\n\tprops: {\n\t\t...LayerLib.SHARED.props,\n\t\tlayout: Object as PropType<FillLayerSpecification['layout']>,\n\t\tpaint : Object as PropType<FillLayerSpecification['paint']>\n\t},\n\temits: [ ...LayerLib.SHARED.emits ],\n\tsetup(props) {\n\n\t\tconst sourceId = inject(sourceIdSymbol);\n\n\t\tif (!sourceId && !props.source) {\n\t\t\twarn('Fill Layer: layer must be used inside source tag or source prop must be set');\n\t\t\treturn;\n\t\t}\n\n\t\tconst ci        = getCurrentInstance()!,\n\t\t\t  map       = inject(mapSymbol)!,\n\t\t\t  isLoaded  = inject(isLoadedSymbol)!,\n\t\t\t  cid       = inject(componentIdSymbol)!,\n\t\t\t  sourceRef = SourceLib.getSourceRef(cid, props.source || sourceId);\n\n\t\tuseDisposableLayer(props.layerId!, ci);\n\n\t\twatch([ isLoaded, sourceRef ], ([ il, src ]) => {\n\t\t\tif (il && (src || src === undefined)) {\n\t\t\t\tmap.value!.addLayer(LayerLib.genLayerOpts<FillLayerSpecification>(props.layerId!, 'fill', props, sourceId), props.before || undefined);\n\t\t\t\tLayerLib.registerLayerEvents(map.value!, props.layerId!, ci.vnode);\n\t\t\t}\n\t\t}, { immediate: true });\n\n\t\treturn () => createCommentVNode('Fill Layer');\n\n\t}\n});\n\n","import { FillExtrusionLayerSpecification } from 'maplibre-gl';\nimport { createCommentVNode, defineComponent, getCurrentInstance, inject, PropType, warn, watch } from 'vue';\nimport { componentIdSymbol, isLoadedSymbol, mapSymbol, sourceIdSymbol } from '@/lib/types';\nimport { LayerLib } from '@/lib/lib/layer.lib';\nimport { SourceLib } from '@/lib/lib/source.lib';\nimport { useDisposableLayer } from '@/lib/composable/useDisposableLayer';\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglFillExtrusionLayer',\n\tprops: {\n\t\t...LayerLib.SHARED.props,\n\t\tlayout: Object as PropType<FillExtrusionLayerSpecification['layout']>,\n\t\tpaint : Object as PropType<FillExtrusionLayerSpecification['paint']>,\n\t},\n\temits: [ ...LayerLib.SHARED.emits ],\n\tsetup(props) {\n\n\t\tconst sourceId = inject(sourceIdSymbol);\n\n\t\tif (!sourceId && !props.source) {\n\t\t\twarn('Fill Extrude Layer: layer must be used inside source tag or source prop must be set');\n\t\t\treturn;\n\t\t}\n\n\t\tconst ci        = getCurrentInstance()!,\n\t\t\t  map       = inject(mapSymbol)!,\n\t\t\t  isLoaded  = inject(isLoadedSymbol)!,\n\t\t\t  cid       = inject(componentIdSymbol)!,\n\t\t\t  sourceRef = SourceLib.getSourceRef(cid, props.source || sourceId);\n\n\t\tuseDisposableLayer(props.layerId!, ci);\n\n\t\twatch([ isLoaded, sourceRef ], ([ il, src ]) => {\n\t\t\tif (il && (src || src === undefined)) {\n\t\t\t\tmap.value!.addLayer(LayerLib.genLayerOpts<FillExtrusionLayerSpecification>(props.layerId!, 'fill-extrusion', props, sourceId), props.before || undefined);\n\t\t\t\tLayerLib.registerLayerEvents(map.value!, props.layerId!, ci.vnode);\n\t\t\t}\n\t\t}, { immediate: true });\n\n\t\treturn () => createCommentVNode('Fill Extrusion Layer');\n\n\t}\n});\n","import { HeatmapLayerSpecification } from 'maplibre-gl';\nimport { createCommentVNode, defineComponent, getCurrentInstance, inject, PropType, warn, watch } from 'vue';\nimport { componentIdSymbol, isLoadedSymbol, mapSymbol, sourceIdSymbol } from '@/lib/types';\nimport { LayerLib } from '@/lib/lib/layer.lib';\nimport { SourceLib } from '@/lib/lib/source.lib';\nimport { useDisposableLayer } from '@/lib/composable/useDisposableLayer';\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglHeatmapLayer',\n\tprops: {\n\t\t...LayerLib.SHARED.props,\n\t\tlayout: Object as PropType<HeatmapLayerSpecification['layout']>,\n\t\tpaint : Object as PropType<HeatmapLayerSpecification['paint']>\n\t},\n\temits: [ ...LayerLib.SHARED.emits ],\n\tsetup(props) {\n\n\t\tconst sourceId = inject(sourceIdSymbol);\n\n\t\tif (!sourceId && !props.source) {\n\t\t\twarn('Heatmap Layer: layer must be used inside source tag or source prop must be set');\n\t\t\treturn;\n\t\t}\n\n\t\tconst ci        = getCurrentInstance()!,\n\t\t\t  map       = inject(mapSymbol)!,\n\t\t\t  isLoaded  = inject(isLoadedSymbol)!,\n\t\t\t  cid       = inject(componentIdSymbol)!,\n\t\t\t  sourceRef = SourceLib.getSourceRef(cid, props.source || sourceId);\n\n\t\tuseDisposableLayer(props.layerId!, ci);\n\n\t\twatch([ isLoaded, sourceRef ], ([ il, src ]) => {\n\t\t\tif (il && (src || src === undefined)) {\n\t\t\t\tmap.value!.addLayer(LayerLib.genLayerOpts<HeatmapLayerSpecification>(props.layerId!, 'heatmap', props, sourceId), props.before || undefined);\n\t\t\t\tLayerLib.registerLayerEvents(map.value!, props.layerId!, ci.vnode);\n\t\t\t}\n\t\t}, { immediate: true });\n\n\t\treturn () => createCommentVNode('Heatmap Layer');\n\n\t}\n});\n","import { HillshadeLayerSpecification } from 'maplibre-gl';\nimport { createCommentVNode, defineComponent, getCurrentInstance, inject, PropType, warn, watch } from 'vue';\nimport { componentIdSymbol, isLoadedSymbol, mapSymbol, sourceIdSymbol } from '@/lib/types';\nimport { LayerLib } from '@/lib/lib/layer.lib';\nimport { SourceLib } from '@/lib/lib/source.lib';\nimport { useDisposableLayer } from '@/lib/composable/useDisposableLayer';\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglHillshadeLayer',\n\tprops: {\n\t\t...LayerLib.SHARED.props,\n\t\tlayout: Object as PropType<HillshadeLayerSpecification['layout']>,\n\t\tpaint : Object as PropType<HillshadeLayerSpecification['paint']>\n\t},\n\temits: [ ...LayerLib.SHARED.emits ],\n\tsetup(props) {\n\n\t\tconst sourceId = inject(sourceIdSymbol);\n\n\t\tif (!sourceId && !props.source) {\n\t\t\twarn('Hillshade Layer: layer must be used inside source tag or source prop must be set');\n\t\t\treturn;\n\t\t}\n\n\t\tconst ci        = getCurrentInstance()!,\n\t\t\t  map       = inject(mapSymbol)!,\n\t\t\t  isLoaded  = inject(isLoadedSymbol)!,\n\t\t\t  cid       = inject(componentIdSymbol)!,\n\t\t\t  sourceRef = SourceLib.getSourceRef(cid, props.source || sourceId);\n\n\t\tuseDisposableLayer(props.layerId!, ci);\n\n\t\twatch([ isLoaded, sourceRef ], ([ il, src ]) => {\n\t\t\tif (il && (src || src === undefined)) {\n\t\t\t\tmap.value!.addLayer(LayerLib.genLayerOpts<HillshadeLayerSpecification>(props.layerId!, 'hillshade', props, sourceId), props.before || undefined);\n\t\t\t\tLayerLib.registerLayerEvents(map.value!, props.layerId!, ci.vnode);\n\t\t\t}\n\t\t}, { immediate: true });\n\n\t\treturn () => createCommentVNode('Hillshade Layer');\n\n\t}\n});\n","import { LineLayerSpecification } from 'maplibre-gl';\nimport { createCommentVNode, defineComponent, getCurrentInstance, inject, PropType, warn, watch } from 'vue';\nimport { componentIdSymbol, isLoadedSymbol, mapSymbol, sourceIdSymbol } from '@/lib/types';\nimport { LayerLib } from '@/lib/lib/layer.lib';\nimport { SourceLib } from '@/lib/lib/source.lib';\nimport { useDisposableLayer } from '@/lib/composable/useDisposableLayer';\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglLineLayer',\n\tprops: {\n\t\t...LayerLib.SHARED.props,\n\t\tlayout: Object as PropType<LineLayerSpecification['layout']>,\n\t\tpaint : Object as PropType<LineLayerSpecification['paint']>\n\t},\n\temits: [ ...LayerLib.SHARED.emits ],\n\tsetup(props) {\n\n\t\tconst sourceId = inject(sourceIdSymbol);\n\n\t\tif (!sourceId && !props.source) {\n\t\t\twarn('Line Layer: layer must be used inside source tag or source prop must be set');\n\t\t\treturn;\n\t\t}\n\n\t\tconst ci        = getCurrentInstance()!,\n\t\t\t  map       = inject(mapSymbol)!,\n\t\t\t  isLoaded  = inject(isLoadedSymbol)!,\n\t\t\t  cid       = inject(componentIdSymbol)!,\n\t\t\t  sourceRef = SourceLib.getSourceRef(cid, props.source || sourceId);\n\n\t\tuseDisposableLayer(props.layerId!, ci);\n\n\t\twatch([ isLoaded, sourceRef ], ([ il, src ]) => {\n\t\t\tif (il && (src || src === undefined)) {\n\t\t\t\tmap.value!.addLayer(LayerLib.genLayerOpts<LineLayerSpecification>(props.layerId!, 'line', props, sourceId), props.before || undefined);\n\t\t\t\tLayerLib.registerLayerEvents(map.value!, props.layerId!, ci.vnode);\n\t\t\t}\n\t\t}, { immediate: true });\n\n\t\treturn () => createCommentVNode('Line Layer');\n\n\t}\n});\n","import { RasterLayerSpecification } from 'maplibre-gl';\nimport { createCommentVNode, defineComponent, getCurrentInstance, inject, PropType, warn, watch } from 'vue';\nimport { componentIdSymbol, isLoadedSymbol, mapSymbol, sourceIdSymbol } from '@/lib/types';\nimport { LayerLib } from '@/lib/lib/layer.lib';\nimport { SourceLib } from '@/lib/lib/source.lib';\nimport { useDisposableLayer } from '@/lib/composable/useDisposableLayer';\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglRasterLayer',\n\tprops: {\n\t\t...LayerLib.SHARED.props,\n\t\tlayout: Object as PropType<RasterLayerSpecification['layout']>,\n\t\tpaint : Object as PropType<RasterLayerSpecification['paint']>\n\t},\n\temits: [ ...LayerLib.SHARED.emits ],\n\tsetup(props) {\n\n\t\tconst sourceId = inject(sourceIdSymbol);\n\n\t\tif (!sourceId && !props.source) {\n\t\t\twarn('Raster Layer: layer must be used inside source tag or source prop must be set');\n\t\t\treturn;\n\t\t}\n\n\t\tconst ci        = getCurrentInstance()!,\n\t\t\t  map       = inject(mapSymbol)!,\n\t\t\t  isLoaded  = inject(isLoadedSymbol)!,\n\t\t\t  cid       = inject(componentIdSymbol)!,\n\t\t\t  sourceRef = SourceLib.getSourceRef(cid, props.source || sourceId);\n\n\t\tuseDisposableLayer(props.layerId!, ci);\n\n\t\twatch([ isLoaded, sourceRef ], ([ il, src ]) => {\n\t\t\tif (il && (src || src === undefined)) {\n\t\t\t\tmap.value!.addLayer(LayerLib.genLayerOpts<RasterLayerSpecification>(props.layerId!, 'raster', props, sourceId), props.before || undefined);\n\t\t\t\tLayerLib.registerLayerEvents(map.value!, props.layerId!, ci.vnode);\n\t\t\t}\n\t\t}, { immediate: true });\n\n\t\treturn () => createCommentVNode('Raster Layer');\n\n\t}\n});\n","import { SymbolLayerSpecification } from 'maplibre-gl';\nimport { createCommentVNode, defineComponent, getCurrentInstance, inject, PropType, warn, watch } from 'vue';\nimport { componentIdSymbol, isLoadedSymbol, mapSymbol, sourceIdSymbol } from '@/lib/types';\nimport { LayerLib } from '@/lib/lib/layer.lib';\nimport { SourceLib } from '@/lib/lib/source.lib';\nimport { useDisposableLayer } from '@/lib/composable/useDisposableLayer';\n\nexport default /*#__PURE__*/ defineComponent({\n\tname : 'MglSymbolLayer',\n\tprops: {\n\t\t...LayerLib.SHARED.props,\n\t\tlayout: Object as PropType<SymbolLayerSpecification['layout']>,\n\t\tpaint : Object as PropType<SymbolLayerSpecification['paint']>\n\t},\n\temits: [ ...LayerLib.SHARED.emits ],\n\tsetup(props) {\n\n\t\tconst sourceId = inject(sourceIdSymbol);\n\n\t\tif (!sourceId && !props.source) {\n\t\t\twarn('Symbol Layer: layer must be used inside source tag or source prop must be set');\n\t\t\treturn;\n\t\t}\n\n\t\tconst ci        = getCurrentInstance()!,\n\t\t\t  map       = inject(mapSymbol)!,\n\t\t\t  isLoaded  = inject(isLoadedSymbol)!,\n\t\t\t  cid       = inject(componentIdSymbol)!,\n\t\t\t  sourceRef = SourceLib.getSourceRef(cid, props.source || sourceId);\n\n\t\tuseDisposableLayer(props.layerId!, ci);\n\n\t\twatch([ isLoaded, sourceRef ], ([ il, src ]) => {\n\t\t\tif (il && (src || src === undefined)) {\n\t\t\t\tmap.value!.addLayer(LayerLib.genLayerOpts<SymbolLayerSpecification>(props.layerId!, 'symbol', props, sourceId), props.before || undefined);\n\t\t\t\tLayerLib.registerLayerEvents(map.value!, props.layerId!, ci.vnode);\n\t\t\t}\n\t\t}, { immediate: true });\n\n\t\treturn () => createCommentVNode('Symbol Layer');\n\n\t}\n});\n","import { App, Plugin } from 'vue';\nimport '@/lib/css/maplibre.scss';\n\n// Import vue components\nimport * as components from '@/lib/components';\n\n// install function executed by Vue.use()\nconst install: Exclude<Plugin['install'], undefined> = function installVueMaplibreGl(app: App) {\n\tObject.entries(components).forEach(([ componentName, component ]) => {\n\t\tapp.component(componentName, component);\n\t});\n};\n\n// Create module definition for Vue.use()\nexport default install;\n\n// To allow individual component use, export components\n// each can be registered via Vue.component()\nexport * from '@/lib/components';\n\n// addition exports\nexport * from '@/lib/types';\nexport { useMap } from '@/lib/lib/mapRegistry';\nexport { defaults as MglDefaults } from '@/lib/defaults';\nexport { Position } from '@/lib/components/controls/position.enum';\nexport { usePositionWatcher } from '@/lib/composable/usePositionWatcher';\nexport { useSource } from '@/lib/composable/useSource';\nexport { useDisposableLayer } from '@/lib/composable/useDisposableLayer';\n"],"names":["mapSymbol","isLoadedSymbol","isInitializedSymbol","componentIdSymbol","sourceIdSymbol","sourceLayerRegistry","emitterSymbol","markerSymbol","AllOptions","obj","AllSourceOptions","defaults","reactive","MapLib","component","map","ctx","eventName","payload","__publicField","Position","PositionValues","instances","defaultKey","useMap","key","registerMap","instance","_a","debounce","fn","wait","immediate","timeout","debounced","args","later","Language","setPrimaryLanguage","lang","layers","strLanguageRegex","strLanguageInArrayRegex","strBilingualRegex","strMoreInfoRegex","langStr","replacer","i","layer","layout","textFieldLayoutProp","regexMatch","newProp","j","elem","map_component","defineComponent","val","props","markRaw","getCurrentInstance","container","shallowRef","isInitialized","ref","isLoaded","isStyleReady","boundMapEvents","emitter","mitt","registryItem","resizeObserver","provide","watch","toRef","v","onStyleReady","initialize","opts","opt","unref","MaplibreMap","len","handler","restart","dispose","control","func","en","nextTick","onMounted","onBeforeUnmount","h","usePositionWatcher","source","_b","attribution_control","inject","AttributionControl","_CustomControl","isAdded","noClasses","CustomControl","custom_control","slots","Teleport","createCommentVNode","fullscreen_control","FullscreenControl","triggerResize","FrameRateControl","background","barWidth","color","font","graphHeight","graphWidth","graphTop","graphRight","width","el","now","fpsNow","context","fps","rect","frameRate_control","geolocation_control","GeolocateControl","navigation_control","NavigationControl","ScaleControlUnit","UnitValues","scale_control","ScaleControl","ButtonType","ButtonTypeValues","types","MglButton","warn","isEvent","e","styleSwitch_control","emit","isMapLoaded","isOpen","modelValue","closer","toggleOpen","setStyleByMap","name","setStyle","s","forceIsOpen","slotProps","createTextVNode","marker_component","marker","Marker","popup_component","root","popup","Popup","SourceLayerRegistry","id","_SourceLib","type","sourceOpts","mcid","isString","SourceLib","useSource","registry","addSource","resetSource","canvas_source","cid","geojson_source","image_source","raster_source","rasterDem_source","vector_source","video_source","_LayerLib","layerId","vn","evProp","LayerLib","useDisposableLayer","ci","removeLayer","background_layer","sourceId","sourceRef","il","src","circle_layer","fill_layer","fillExtrusion_layer","heatmap_layer","hillshade_layer","line_layer","raster_layer","smybol_layer","install","app","components","componentName"],"mappings":"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","x_google_ignoreList":[6]}